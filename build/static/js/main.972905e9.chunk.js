(this.webpackJsonpreact_client=this.webpackJsonpreact_client||[]).push([[0],{140:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),o=a.n(r),c=a(14),i=a.n(c),s=(a(140),a(16)),l=a(110),d=a(13),u=a(7),p=a(19),j=a(88),b=a(67),h=a(11),m=a.n(h),O=a(20),f=a(104),g=a.n(f),x=a(103),v=a.n(x),y=a(192),w=a(194),k=a(225),C=a(200),_=a(201),S=a(6),N=a(224),L=a(193),B=Object(S.a)((function(e){return Object(N.a)({body:{fontSize:14,padding:0,maxWidth:"10ch"}})}))(y.a),A=Object(S.a)((function(e){return Object(N.a)({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default},"&:nth-of-type(even)":{backgroundColor:L.a[800]},"& input":{backgroundColor:"inherit",paddingLeft:0}}})}))(w.a);function I(e){var t=Object(r.useState)({Amount:""}),a=Object(s.a)(t,2),o=a[0],c=a[1];function i(e,t){return Object(n.jsx)("datalist",{id:t,children:e.map((function(e){return Object(n.jsx)("option",{value:e.name},e.id)}))})}function l(e){var t=e.target,a=t.name,n=t.value;c(Object(u.a)(Object(u.a)({},o),{},Object(d.a)({},a,n)))}return Object(r.useEffect)((function(){c(e.entry)}),[e.entry]),Object(n.jsxs)(A,{children:[e.fields.filter((function(e){return!e.name.includes("id")})).map((function(t){var a,r,c,s,d,u,p,j,b,h;return Object(n.jsxs)(B,{children:[Object(n.jsx)(k.a,{name:t.name,onBlur:function(t){e.handleChange(t,e.i)},onChange:l,className:"tableInput",value:o[t.name]||"",inputProps:{list:t.name},InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"Amount"===t.name?"$":null}),disableUnderline:!0},style:{width:"80%"}}),"Source"===t.name&&(null===(a=e.dataLists)||void 0===a?void 0:a.source)?i(null===(r=e.dataLists)||void 0===r?void 0:r.source,t.name):null,"Person"===t.name&&(null===(c=e.dataLists)||void 0===c?void 0:c.person_earner)?i(null===(s=e.dataLists)||void 0===s?void 0:s.person_earner,t.name):null,"Narrow_category"===t.name&&(null===(d=e.dataLists)||void 0===d?void 0:d.narrow_category)?i(null===(u=e.dataLists)||void 0===u?void 0:u.narrow_category,t.name):null,"Broad_category"===t.name&&(null===(p=e.dataLists)||void 0===p?void 0:p.broad_category)?i(null===(j=e.dataLists)||void 0===j?void 0:j.broad_category,t.name):null,"Vendor"===t.name&&(null===(b=e.dataLists)||void 0===b?void 0:b.vendor)?i(null===(h=e.dataLists)||void 0===h?void 0:h.vendor,t.name):null]})})),Object(n.jsx)(B,{children:Object(n.jsx)(_.a,{color:"primary",onClick:function(){return e.handleUpdate(e.i)},children:Object(n.jsx)(v.a,{})})}),Object(n.jsx)(B,{children:Object(n.jsx)(_.a,{"aria-label":"delete",color:"secondary",onClick:function(){return e.deleteEntry(o.entry_id||o.id)},children:Object(n.jsx)(g.a,{})})})]})}var E=a(204),P=a(206),T=a(203),F=a(205),D=a(82),U=a(202);function z(e){var t=Object(S.a)((function(e){return Object(N.a)({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:10,fontSize:16}})}))(y.a),a=Object(U.a)((function(e){return Object(N.a)({table:{minWidth:650}})}))(),o=Object(r.createRef)();return Object(r.useEffect)((function(){o.current&&o.current.scrollIntoView({behavior:"smooth"})}),[]),Object(n.jsx)(T.a,{component:D.a,children:Object(n.jsxs)(E.a,{className:a.table,ref:o,children:[Object(n.jsx)(F.a,{children:Object(n.jsxs)(w.a,{children:[e.state.schema.fields.filter((function(e){return!e.name.includes("id")})).map((function(e){return Object(n.jsx)(t,{children:e.name.replace("_"," ")},e.name)})),Object(n.jsx)(t,{children:Object(n.jsx)("span",{children:"Save"})}),Object(n.jsx)(t,{children:Object(n.jsx)("span",{children:"Delete"})})]})}),Object(n.jsx)(P.a,{className:"tableBody",children:e.state.data.map((function(t,a){return Object(n.jsx)(I,{entry:t,i:a,fields:e.state.schema.fields,handleChange:e.handleChange,handleUpdate:e.handleUpdate,dataLists:e.dataLists,deleteEntry:e.deleteEntry},a)}))})]})})}function M(e,t){if(401===e.status)throw new Error("Unauthorized");if(200!==e.status)throw new Error("Error! "+e.status);return"json"===t?e.json():"text"===t?e.text():e.blob()}var R,W={expenses:function(e,t){return fetch("/api/expenses/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"json")}))},postExpenses:function(e,t){return fetch("/api/expenses/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return M(e,"text")}))},postBatchExpenses:function(e,t){return fetch("/api/expenses/batch",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return M(e,"text")}))},search:function(e,t){var a=t.search;return fetch("/api/expenses/search/".concat(a),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"json")}))},postIncome:function(e,t){return fetch("/api/income/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return M(e,"text")}))},postBatchIncome:function(e,t){return fetch("/api/income/batch",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return M(e,"text")}))},deleteExpenses:function(e,t){return fetch("/api/expenses/".concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"text")}))},updateExpenses:function(e,t){return fetch("/api/expenses/".concat(t.entry_id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return M(e,"text")}))},income:function(e,t){return fetch("/api/income/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"json")}))},updateIncome:function(e,t){return fetch("/api/income/".concat(t.id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return M(e,"text")}))},deleteIncome:function(e,t){return fetch("/api/income/".concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"text")}))},pivot:function(e,t){return fetch("/api/expenses/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"json")}))},dataList:function(e){return fetch("/api/datalists",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"json")}))},login:function(e){return fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return M(e,"json")}))},checkAuth:function(e){return fetch("/auth/checkAuth",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"json")}))},downloadFile:function(e,t,a,n){fetch("/api/expenses/file/".concat(a,"/").concat(n),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return M(e,"blob")})).then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),n.remove()}))}},G=a(111);function J(){return(J=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)("pendingFinances",2,{upgrade:function(e){e.createObjectStore("expenses",{autoIncrement:!0}),e.createObjectStore("income",{autoIncrement:!0})}});case 2:R=e.sent,navigator.onLine&&Y();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return V.apply(this,arguments)}function V(){return(V=Object(O.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.put(t,a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.clear("expenses");case 3:return e.next=5,R.clear("income");case 5:return e.abrupt("return","pendingFinances cleared!");case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Y(){return K.apply(this,arguments)}function K(){return(K=Object(O.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,R.getAll("expenses");case 4:if(!((a=e.sent).length>0)){e.next=9;break}return e.next=8,W.postBatchExpenses(t,a);case 8:R.clear("expenses");case 9:return e.next=11,R.getAll("income");case 11:if(!((n=e.sent).length>0)){e.next=16;break}return e.next=15,W.postBatchIncome(t,n);case 15:R.clear("income");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}window.addEventListener("online",Y);var q=a(207),Q=a(151),X=a(197),Z=a(227),ee=a(221),te=a(228),ae=a(209),ne=a(78),re=a(25),oe=a(218);function ce(e){var t,a=o.a.useContext(Ze),c=a.Auth,i=a.setAuth,l=a.setAlertState,p={Date:new Date(Date.now()),Amount:NaN,person_id:NaN,broad_category_id:NaN,narrow_category_id:NaN,vendor:"",notes:""},j=Object(r.useState)(p),b=Object(s.a)(j,2),h=b[0],f=b[1],g=Object(r.useState)({name:"",id:NaN}),x=Object(s.a)(g,2),v=x[0],y=x[1],w=[{name:"Groceries",id:6,narrowCategories:[{name:"Food",id:10},{name:"Alcohol",id:49},{name:"Entertaining",id:7}]},{name:"Health and Body",id:12,narrowCategories:[{name:"Toiletries",id:27},{name:"Make-up",id:51},{name:"Drugs/Supplements",id:273},{name:"Doctors Visits",id:24},{name:"Gym",id:34},{name:"Essential Oils",id:58},{name:"Massages/Body Care",id:41}],person:!0},{name:"Work",id:8,narrowCategories:[{name:"Road Food Out",id:20},{name:"Road Groceries",id:37},{name:"Road Coffee",id:21},{name:"Business Food",id:70},{name:"Scores",id:68},{name:"Office Supplies",id:11},{name:"Plane Tickets",id:18},{name:"Transportation",id:9},{name:"Union Dues",id:55},{name:"Dry Cleaning",id:14},{name:"Concert Tickets",id:655},{name:"Lessons/Coachings",id:69},{name:"Application fees",id:61},{name:"Pianist Fees",id:656}],person:!0},{name:"Eating Out",id:3,narrowCategories:[{name:"Date",id:28},{name:"Friends",id:3},{name:"Snacks",id:17},{name:"On the Run",id:8},{name:"Coffee",id:30},{name:"Ordering in",id:48}]},{name:"Home Goods",id:9,narrowCategories:[{name:"Kitchen",id:12},{name:"Decorating",id:29},{name:"Furniture",id:16},{name:"Paper Products/Cleaning",id:15},{name:"Office Supplies",id:11},{name:"Hobbies/Creative",id:23},{name:"Linens",id:201}]},{name:"New York Home",id:1,narrowCategories:[{name:"Rent",id:40},{name:"Internet",id:1},{name:"Electricity",id:26}]},{name:"Seattle Home",id:7,narrowCategories:[{name:"Mortgage",id:39},{name:"HOA",id:38},{name:"Taxes",id:657},{name:"Internet",id:1},{name:"Electricity",id:26},{name:"Manager/Maintanence",id:42},{name:"Insurance",id:134}]},{name:"Clothes",id:11,person:!0},{name:"Laundry",id:4,narrowCategories:[{name:"Laundry",id:4},{name:"Dry Cleaning",id:14}]},{name:"Entertainment",id:14,narrowCategories:[{name:"Live Shows",id:32},{name:"Movies",id:44},{name:"Museums",id:53},{name:"Books",id:36},{name:"Home (Netflix, Spotify, Amazon, Movie Rentals)",id:46},{name:"Newspaper/Magazine",id:47}]},{name:"Philanthropy",id:17},{name:"Electronics",id:5,narrowCategories:[{name:"Phone Bill",id:33},{name:"Computers",id:588},{name:"Accessories",id:31},{name:"Cloud Storage Fees",id:6}]},{name:"Gifts",id:13},{name:"Transportation",id:2,narrowCategories:[{name:"Gas",id:22},{name:"Repairs",id:577},{name:"Insurance",id:134},{name:"Bike",id:567},{name:"Subway",id:35},{name:"Taxi/Lyft",id:5},{name:"Car Rental",id:2},{name:"Seattle Airplanes",id:276},{name:"Parking",id:209}]},{name:"Maggie",id:10,narrowCategories:[{name:"Food",id:10},{name:"Litter",id:13},{name:"Vet Bills",id:275},{name:"Toys",id:60}]},{name:"Travel/Leisure",id:16,narrowCategories:[{name:"Planes",id:62},{name:"Ground Transportation",id:52},{name:"Food",id:10},{name:"Experiences",id:64},{name:"Lodging",id:43}]},{name:"Legal",id:19,narrowCategories:[{name:"Documents",id:202},{name:"Services",id:63}]},{name:"Student Loans",id:15},{name:"Education",id:18,person:!0},{name:"Theo",id:7,narrowCategories:[{name:"Baby sitting",id:274},{name:"Toys",id:60}]}];function _(e){var t=e.target.name;if(f(Object(u.a)(Object(u.a)({},h),{},Object(d.a)({},t,e.target.value))),"broad_category_id"===t){var a=w.filter((function(t){return t.id===e.target.value}))[0];y(a)}}function S(){return(S=Object(O.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),h.Date&&h.Amount&&h.broad_category_id&&h.vendor){t.next=4;break}return l({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("return");case 4:return(r=Object(u.a)({},h)).Date=null===(n=r.Date)||void 0===n?void 0:n.toLocaleDateString("en-US"),t.prev=6,e.setOpenBackdrop(!0),t.next=10,W.postExpenses(c.token,r);case 10:e.setOpenBackdrop(!1),l({severity:"success",message:"Record Saved!",open:!0}),t.next=25;break;case 14:if(t.prev=14,t.t0=t.catch(6),e.setOpenBackdrop(!1),"Error! 500"!==t.t0.message){t.next=22;break}return l({severity:"error",message:"Server Error! Contact Eli",open:!0}),t.abrupt("return");case 22:H("expenses",r),"Unauthorized"===t.t0.message&&i({type:"LOGOUT"}),l({severity:"warning",message:"Record Saved Locally",open:!0});case 25:return t.prev=25,f(p),y({name:"",id:NaN}),t.finish(25);case 29:case"end":return t.stop()}}),t,null,[[6,14,25,29]])})))).apply(this,arguments)}return Object(n.jsxs)(q.a,{children:[Object(n.jsx)(Q.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Log Expense"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return S.apply(this,arguments)},children:[Object(n.jsx)(re.a,{utils:ne.a,children:Object(n.jsx)(oe.a,{disableToolbar:!0,fullWidth:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:h.Date,onChange:function(e){f(Object(u.a)(Object(u.a)({},h),{},{Date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(k.a,{onChange:_,value:h.vendor,label:"Vendor",name:"vendor",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(k.a,{onChange:_,value:h.Amount,label:"Amount",name:"Amount",type:"number",InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"$"})},inputProps:{step:"0.01"}}),Object(n.jsxs)(X.a,{className:e.classes.formControl,children:[Object(n.jsx)(Z.a,{htmlFor:"broad_category",children:"Broad Category"}),Object(n.jsx)(ee.a,{onChange:_,value:h.broad_category_id,name:"broad_category_id",labelId:"broad_category",label:"Broad Category",children:w.map((function(e){return Object(n.jsx)(te.a,{value:e.id,children:e.name})}))})]}),v.narrowCategories?Object(n.jsxs)(X.a,{className:e.classes.formControl,children:[Object(n.jsx)(Z.a,{htmlFor:"narrow_category",children:"Narrow Category"}),Object(n.jsx)(ee.a,{onChange:_,value:h.narrow_category_id,name:"narrow_category_id",labelId:"narrow_category",label:"Narrow Category",children:null===(t=v.narrowCategories)||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(te.a,{value:e.id,children:e.name})}))})]}):null,v.person?Object(n.jsxs)(X.a,{className:e.classes.formControl,children:[Object(n.jsx)(Z.a,{htmlFor:"person_id",children:"Person"}),Object(n.jsx)(ee.a,{onChange:_,value:h.person_id,name:"person_id",labelId:"person_id",label:"Person",children:[{name:"Alexa",id:3},{name:"Eli",id:1},{name:"Theo",id:2}].map((function(e){return Object(n.jsx)(te.a,{value:e.id,children:e.name})}))})]}):null,Object(n.jsx)(k.a,{onChange:_,value:h.notes,label:"Notes",name:"notes",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(ae.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"}),Object(n.jsx)(ae.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){f(p),e.handleClose()},children:"Close"})]})]})}function ie(e){var t=o.a.useContext(Ze),a=t.Auth,c=t.setAuth,i=t.setAlertState,l={date:new Date(Date.now()),amount:NaN,earner_id:NaN,source:""},p=Object(r.useState)(l),j=Object(s.a)(p,2),b=j[0],h=j[1];function f(e){var t=e.target.name;h(Object(u.a)(Object(u.a)({},b),{},Object(d.a)({},t,e.target.value)))}function g(){return(g=Object(O.a)(m.a.mark((function t(n){var r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),b.date&&b.amount&&b.earner_id&&b.source){t.next=4;break}return i({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("return");case 4:return r=Object(u.a)({},b),t.prev=5,r.date=null===(o=r.date)||void 0===o?void 0:o.toLocaleDateString("en-US"),e.setOpenBackdrop(!0),t.next=10,W.postIncome(a.token,r);case 10:e.setOpenBackdrop(!1),i({severity:"success",message:"Record Saved!",open:!0}),t.next=25;break;case 14:if(t.prev=14,t.t0=t.catch(5),e.setOpenBackdrop(!1),"Error! 500"!==t.t0.message){t.next=22;break}return i({severity:"error",message:"Server Error! Contact Eli",open:!0}),t.abrupt("return");case 22:H("income",r),i({severity:"warning",message:"Record Saved Locally",open:!0}),"Unauthorized"===t.t0.message&&c({type:"LOGOUT"});case 25:return t.prev=25,h(l),t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[5,14,25,28]])})))).apply(this,arguments)}return Object(n.jsxs)(q.a,{children:[Object(n.jsx)(Q.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Log Income"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return g.apply(this,arguments)},children:[Object(n.jsx)(re.a,{utils:ne.a,children:Object(n.jsx)(oe.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:b.date,onChange:function(e){h(Object(u.a)(Object(u.a)({},b),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(k.a,{onChange:f,value:b.source,label:"Source",name:"source",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(k.a,{onChange:f,value:b.amount,label:"Amount",name:"amount",type:"number",InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"$"})},inputProps:{step:"0.01"}}),Object(n.jsxs)(X.a,{className:e.classes.formControl,children:[Object(n.jsx)(Z.a,{htmlFor:"earner_id",children:"Person"}),Object(n.jsx)(ee.a,{onChange:f,value:b.earner_id,name:"earner_id",labelId:"earner_id",label:"Person",children:[{name:"Alexa",id:3},{name:"Eli",id:1},{name:"Rent",id:8},{name:"Sales",id:10},{name:"Gift",id:11}].map((function(e){return Object(n.jsx)(te.a,{value:e.id,children:e.name})}))})]}),Object(n.jsx)(ae.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"}),Object(n.jsx)(ae.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){h(l),e.handleClose()},children:"Close"})]})]})}var se=a(219),le=a(208),de=a(152),ue=a(210),pe=a(229),je=a(230),be=a(222),he=a(89),me=a.n(he),Oe=Object(S.a)((function(e){return Object(N.a)({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:10,fontSize:16},body:{padding:10,fontSize:14}})}))(y.a),fe=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:e.palette.background.default,cursor:"pointer"}})}))(w.a),ge=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:L.a[800]}})}))(w.a),xe=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:L.a[700]}})}))(w.a);function ve(e){var t=Object(r.useState)([!1]),a=Object(s.a)(t,2),o=a[0],c=a[1];var i=e.state.data.reduce((function(e,t){if(t.Broad_category)if(e[t.Broad_category]?e[t.Broad_category].total+=parseFloat(t.Amount):e[t.Broad_category]={total:parseFloat(t.Amount),narrow_categories:{}},t.Narrow_category)e[t.Broad_category].narrow_categories[t.Narrow_category]?e[t.Broad_category].narrow_categories[t.Narrow_category].total+=parseFloat(t.Amount):e[t.Broad_category].narrow_categories[t.Narrow_category]={total:parseFloat(t.Amount),persons:{}},t.Person&&(e[t.Broad_category].narrow_categories[t.Narrow_category].persons[t.Person]?e[t.Broad_category].narrow_categories[t.Narrow_category].persons[t.Person]+=parseFloat(t.Amount):e[t.Broad_category].narrow_categories[t.Narrow_category].persons[t.Person]=parseFloat(t.Amount));else if(t.Person){var a;(null===(a=e[t.Broad_category].narrow_categories["--"])||void 0===a?void 0:a.persons[t.Person])?(e[t.Broad_category].narrow_categories["--"].persons[t.Person]+=parseFloat(t.Amount),e[t.Broad_category].narrow_categories["--"].total+=parseFloat(t.Amount)):e[t.Broad_category].narrow_categories=Object(u.a)(Object(u.a)({},e[t.Broad_category].narrow_categories),{},{"--":{persons:Object(d.a)({},t.Person,parseFloat(t.Amount)),total:parseFloat(t.Amount)}})}return e}),{});return console.log(i),Object(r.useEffect)((function(){var e=Object.keys(i).map((function(e){return!1}));c(e)}),[e]),Object(n.jsx)(T.a,{component:D.a,children:Object(n.jsxs)(E.a,{children:[Object(n.jsx)(F.a,{children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(Oe,{children:"Broad category"}),Object(n.jsx)(Oe,{children:"Narrow Category"}),Object(n.jsx)(Oe,{children:"Person"}),Object(n.jsx)(Oe,{children:"Amount"})]})}),Object(n.jsx)(P.a,{children:Object.keys(i).map((function(e,t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(fe,{onClick:function(){return function(e){var t=Object(b.a)(o);t[e]=!t[e],c(t)}(t)},children:[Object(n.jsx)(Oe,{children:e}),Object(n.jsx)(Oe,{children:"TOTAL"}),Object(n.jsx)(Oe,{}),Object(n.jsxs)(Oe,{children:["$",i[e].total.toFixed(2)]})]},t),i[e].narrow_categories&&o[t]?Object.keys(i[e].narrow_categories).map((function(t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(ge,{children:[Object(n.jsx)(Oe,{}),Object(n.jsx)(Oe,{children:t}),Object(n.jsx)(Oe,{children:"TOTAL"}),Object(n.jsxs)(Oe,{children:["$",i[e].narrow_categories[t].total.toFixed(2)]})]}),i[e].narrow_categories[t].persons?Object.keys(i[e].narrow_categories[t].persons).map((function(a){return Object(n.jsxs)(xe,{children:[Object(n.jsx)(Oe,{}),Object(n.jsx)(Oe,{}),Object(n.jsx)(Oe,{children:a}),Object(n.jsxs)(Oe,{children:["$",i[e].narrow_categories[t].persons[a].toFixed(2)]})]})})):null]})})):null]})}))})]})})}var ye=a(212),we=a(213);function ke(e){var t=e.classes,a=e.handleFormSubmit,r=e.handleFormChange,o=e.formState;return Object(n.jsx)(ye.a,{className:t.root,children:Object(n.jsx)(we.a,{variant:"outlined",children:Object(n.jsxs)("form",{onSubmit:a,className:t.root,children:[Object(n.jsxs)(X.a,{variant:"outlined",className:t.formControl,children:[Object(n.jsx)(Z.a,{htmlFor:"form",children:"Report"}),Object(n.jsxs)(ee.a,{name:"form",label:"Report",labelId:"form",value:o.form,onChange:r,children:[Object(n.jsx)(te.a,{value:"expenses",children:"Expenses"}),Object(n.jsx)(te.a,{value:"income",children:"Income"}),Object(n.jsx)(te.a,{value:"pivot",children:"Pivot Table"}),Object(n.jsx)(te.a,{value:"search",children:"Search"})]})]}),"search"===o.form?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(k.a,{onChange:r,value:o.search,label:"Search",name:"search",type:"text",variant:"outlined",InputLabelProps:{shrink:!0}})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(k.a,{onChange:r,value:o.year,label:"Year",name:"year",type:"number",variant:"outlined"}),Object(n.jsxs)(X.a,{variant:"outlined",className:t.formControl,children:[Object(n.jsx)(Z.a,{htmlFor:"month2",children:"Month"}),Object(n.jsxs)(ee.a,{onChange:r,value:o.month,name:"month",labelId:"month2",label:"Month",children:[Object(n.jsx)(te.a,{value:1,children:"January"}),Object(n.jsx)(te.a,{value:2,children:"February"}),Object(n.jsx)(te.a,{value:3,children:"March"}),Object(n.jsx)(te.a,{value:4,children:"April"}),Object(n.jsx)(te.a,{value:5,children:"May"}),Object(n.jsx)(te.a,{value:6,children:"June"}),Object(n.jsx)(te.a,{value:7,children:"July"}),Object(n.jsx)(te.a,{value:8,children:"August"}),Object(n.jsx)(te.a,{value:9,children:"September"}),Object(n.jsx)(te.a,{value:10,children:"October"}),Object(n.jsx)(te.a,{value:11,children:"November"}),Object(n.jsx)(te.a,{value:12,children:"December"})]})]})]}),Object(n.jsx)(ae.a,{type:"submit",variant:"contained",color:"primary",children:"View"})]})})})}var Ce=a(15),_e=a(214),Se=a(211),Ne=a(117),Le=a(109),Be=a(105),Ae=a.n(Be),Ie=a(106),Ee=a.n(Ie),Pe=Object(U.a)((function(e){return Object(N.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(1)},title:Object(d.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(d.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Ce.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Ce.c)(e.palette.common.white,.25)},marginRight:e.spacing(1),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(d.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(d.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(d.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})}));function Te(e){var t=e.handleFormChange,a=e.handleFormSubmit,r=e.formState,c=Pe(),i=o.a.useState(null),l=Object(s.a)(i,2),d=l[0],u=l[1],p=Boolean(d),j=o.a.useContext(Ze),b=j.Auth,h=j.setAuth;function m(){W.downloadFile(b.token,"".concat(b.user,"_expenses.xlsx"),"2020-02-01","2020-05-01"),f()}function O(){h({type:"LOGOUT"}),function(){$.apply(this,arguments)}()}var f=function(){u(null)},g="primary-search-account-menu",x=Object(n.jsxs)(Le.a,{anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},id:g,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:f,children:[Object(n.jsx)(te.a,{onClick:m,children:"Downloads"}),Object(n.jsx)(te.a,{onClick:O,children:"Logout"})]});return Object(n.jsxs)("div",{className:c.grow,children:[Object(n.jsx)(_e.a,{position:"static",children:Object(n.jsxs)(Se.a,{children:[Object(n.jsx)(Q.a,{className:c.title,variant:"h6",noWrap:!0,children:"Finances"}),Object(n.jsx)("div",{className:c.search,children:Object(n.jsxs)("form",{onSubmit:a,children:[Object(n.jsx)("div",{className:c.searchIcon,children:Object(n.jsx)(Ae.a,{})}),Object(n.jsx)(Ne.a,{placeholder:"Search\u2026",classes:{root:c.inputRoot,input:c.inputInput},inputProps:{"aria-label":"search"},name:"search",value:r.search,onChange:t})]})}),Object(n.jsx)("div",{className:c.grow}),Object(n.jsxs)("div",{className:c.sectionDesktop,children:[Object(n.jsx)(ae.a,{color:"inherit",onClick:m,children:"Download"}),Object(n.jsx)(ae.a,{color:"inherit",onClick:O,children:"Logout"})]}),Object(n.jsx)("div",{className:c.sectionMobile,children:Object(n.jsx)(_.a,{"aria-label":"show more","aria-controls":g,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(n.jsx)(Ee.a,{})})})]})}),x]})}var Fe=function(){var e,t,a,c,i=o.a.useContext(Ze),l=i.Auth,p=i.setAuth,j=i.setAlertState,h=Object(r.useState)({form:"expenses",year:new Date(Date.now()).getUTCFullYear(),month:new Date(Date.now()).getUTCMonth()+1,search:""}),f=Object(s.a)(h,2),g=f[0],x=f[1],v=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Date:"",Source:"",Person:"",id:NaN,source_id:NaN,earner_id:NaN}]}),y=Object(s.a)(v,2),w=y[0],k=y[1],C=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Date:"",Source:"",Vendor:"",Broad_category:"",Narrow_category:"",Person:"",Notes:"",entry_id:NaN}]}),_=Object(s.a)(C,2),S=_[0],L=_[1],B=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Date:"",Source:"",Vendor:"",Broad_category:"",Narrow_category:"",Person:"",Notes:"",entry_id:NaN}]}),A=Object(s.a)(B,2),I=A[0],E=A[1],P=Object(r.useState)(""),T=Object(s.a)(P,2),F=(T[0],T[1],Object(r.useState)({source:[],person_earner:[],narrow_category:[],broad_category:[],vendor:[]})),D=Object(s.a)(F,2),M=D[0],R=D[1],G=Object(r.useState)(!1),J=Object(s.a)(G,2),H=J[0],V=J[1];function $(e){if(e.Date){var t=new Date(e.Date),a=t.getUTCFullYear(),n=(1+t.getUTCMonth()).toString();n=n.length>1?n:"0"+n;var r=t.getUTCDate().toString(),o=n+"/"+(r=r.length>1?r:"0"+r)+"/"+a;return e.Date=o,e}return e}function Y(e){var t=e.target.name;x(Object(u.a)(Object(u.a)({},g),{},Object(d.a)({},t,e.target.value)))}function K(e){return q.apply(this,arguments)}function q(){return(q=Object(O.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),a=g.form,V(!0),e.next=6,W[a](l.token,g);case 6:n=e.sent,V(!1),"pivot"!==a&&(n.data=n.data.map($)),e.t0=a,e.next="expenses"===e.t0?12:"income"===e.t0?14:"pivot"===e.t0?16:"search"===e.t0?18:20;break;case 12:return L(n),e.abrupt("break",20);case 14:return k(n),e.abrupt("break",20);case 16:return L(n),e.abrupt("break",20);case 18:return E(n),e.abrupt("break",20);case 20:e.next=27;break;case 22:e.prev=22,e.t1=e.catch(0),"Unauthorized"===e.t1.message&&p({type:"LOGOUT"}),V(!1),j({severity:"error",message:"Error Fetching Data",open:!0});case 27:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function X(e,t){var a,n;switch(e){case"Person":a=M.person_earner,n="person_id";break;case"Source":a=M.source,n="source_id";break;case"Broad_category":a=M.broad_category,n="broad_category_id";break;case"Narrow_category":a=M.narrow_category,n="narrow_category_id";break;case"Vendor":a=M.vendor,n="vendor_id"}var r=a.filter((function(e){return e.name===t}))[0];return r?{id:n,dataListItem:r}:{id:null,dataListItem:null}}function Z(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(O.a)(m.a.mark((function e(t,a){var n,r,o,c,i,s,l,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.target,r=n.name,o=n.value,c=Object(b.a)(S.data),i=Object(u.a)(Object(u.a)({},c[a]),{},Object(d.a)({},r,o)),"Person"!==r&&"Broad_category"!==r&&"Narrow_category"!==r&&"Vendor"!==r||(s=X(r,o),l=s.id,j=s.dataListItem,l&&j&&(i=Object(u.a)(Object(u.a)({},i),{},Object(d.a)({},l,j.id)))),c[a]=i,L(Object(u.a)(Object(u.a)({},S),{},{data:c}))}catch(h){console.error(h),"Unauthorized"===h.message&&p({type:"LOGOUT"})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(O.a)(m.a.mark((function e(t,a){var n,r,o,c,i,s,l,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.target,r=n.name,o=n.value,c=Object(b.a)(w.data),i=Object(u.a)(Object(u.a)({},c[a]),{},Object(d.a)({},r,o)),"Person"!==r&&"Source"!==r||(s=X(r,o),l=s.id,p=s.dataListItem,l&&p&&(i=Object(u.a)(Object(u.a)({},i),{},Object(d.a)({},l,p.id)))),c[a]=i,k(Object(u.a)(Object(u.a)({},w),{},{data:c}))}catch(j){console.error(j)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.updateExpenses(l.token,S.data[t]);case 3:j({severity:"success",message:"Record updated!",open:!0}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),j({severity:"error",message:"Error: Failed to save!",open:!0});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function re(){return(re=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.updateIncome(l.token,w.data[t]);case 3:j({severity:"success",message:"Record updated!",open:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j({severity:"error",message:"Error: Failed to save!",open:!0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function oe(e){return he.apply(this,arguments)}function he(){return(he=Object(O.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"expenses"!==g.form){e.next=8;break}return e.next=4,W.deleteExpenses(l.token,t);case 4:a=S.data.filter((function(e){return e.entry_id!==t})),L(Object(u.a)(Object(u.a)({},S),{},{data:a})),e.next=13;break;case 8:if("income"!==g.form){e.next=13;break}return e.next=11,W.deleteIncome(l.token,t);case 11:n=w.data.filter((function(e){return e.id!==t})),k(Object(u.a)(Object(u.a)({},w),{},{data:n}));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),"Unauthorized"===e.t0&&p({type:"LOGOUT"});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var Oe=Object(U.a)((function(e){var t,a;return Object(N.a)({formControl:{margin:e.spacing(1),minWidth:"7em"},selectEmpty:{marginTop:e.spacing(2)},root:(t={display:"flex",justifyContent:"center",flexWrap:"wrap"},Object(d.a)(t,e.breakpoints.up("md"),{flexWrap:"noWrap"}),Object(d.a)(t,"& > *",Object(d.a)({margin:e.spacing(1)},e.breakpoints.down("xs"),{width:"100%"})),t),wallchart:{width:"100%"},logoutBtn:{float:"right",margin:"1em"},downloadBtn:{float:"left",margin:"1em"},backdrop:{zIndex:1301,color:"#fff"},speedDial:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},dialog:{width:"100%"},datePicker:Object(d.a)({},e.breakpoints.down("sm"),{marginLeft:"-10px"}),mobileTitle:(a={display:"none"},Object(d.a)(a,e.breakpoints.down("sm"),{display:"flex"}),Object(d.a)(a,"justifyContent","center"),a)})}))(),fe=o.a.useState(!1),ge=Object(s.a)(fe,2),xe=ge[0],ye=ge[1],we=[{icon:Object(n.jsx)(me.a,{}),name:"Expenses",action:function(){Ne(!0),ye(!1)},operation:"product"},{icon:Object(n.jsx)(me.a,{}),name:"Income",action:function(){Ie(!0),ye(!1)},operation:"tag"}],Ce=Object(r.useState)(!1),_e=Object(s.a)(Ce,2),Se=_e[0],Ne=_e[1],Le=Object(r.useState)(!1),Be=Object(s.a)(Le,2),Ae=Be[0],Ie=Be[1];function Ee(){Ne(!1),Ie(!1)}return Object(r.useEffect)((function(){function e(){return(e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.dataList(l.token);case 2:t=e.sent,R(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)(se.a,{component:"div",className:"Home",children:[Object(n.jsx)(Te,{handleFormChange:Y,handleFormSubmit:K,formState:g}),Object(n.jsxs)(se.a,{component:"header",className:"header",children:[Object(n.jsx)(Q.a,{className:Oe.mobileTitle,variant:"h6",noWrap:!0,children:"Finances"}),Object(n.jsx)("img",{src:"/wallchart",alt:"Wall Chart",className:Oe.wallchart}),Object(n.jsx)(ke,{classes:Oe,handleFormSubmit:K,handleFormChange:Y,formState:g})]}),Object(n.jsxs)("div",{className:"body",children:["income"===g.form&&(null===(e=w.data[0])||void 0===e?void 0:e.id)?Object(n.jsx)(z,{state:w,dataLists:M,handleChange:function(e,t){return te.apply(this,arguments)},handleUpdate:function(e){return re.apply(this,arguments)},deleteEntry:oe,form:g.form}):null,"expenses"===g.form&&(null===(t=S.data[0])||void 0===t?void 0:t.entry_id)?Object(n.jsx)(z,{state:S,dataLists:M,handleChange:Z,handleUpdate:ae,deleteEntry:oe,form:g.form}):null,"search"===g.form&&(null===(a=I.data[0])||void 0===a?void 0:a.entry_id)?Object(n.jsx)(z,{state:I,dataLists:M,handleChange:Z,handleUpdate:ae,deleteEntry:oe,form:g.form}):null,"pivot"===g.form&&(null===(c=S.data[0])||void 0===c?void 0:c.entry_id)?Object(n.jsx)(ve,{state:S}):null]}),Object(n.jsx)(le.a,{onClose:Ee,open:Se,maxWidth:"xl",children:Object(n.jsx)(ce,{classes:Oe,handleClose:Ee,setOpenBackdrop:V})}),Object(n.jsx)(le.a,{onClose:Ee,open:Ae,maxWidth:"xl",children:Object(n.jsx)(ie,{classes:Oe,handleClose:Ee,setOpenBackdrop:V})}),Object(n.jsx)(pe.a,{ariaLabel:"SpeedDial example",className:Oe.speedDial,icon:Object(n.jsx)(je.a,{}),onClose:function(){ye(!1)},onOpen:function(){ye(!0)},open:xe,onMouseLeave:function(){},children:we.map((function(e){return Object(n.jsx)(be.a,{icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:e.action},e.name)}))}),Object(n.jsx)(de.a,{className:Oe.backdrop,open:H,children:Object(n.jsx)(ue.a,{disableShrink:!0,color:"inherit"})})]})},De=Object(U.a)((function(e){return Object(N.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":Object(d.a)({margin:e.spacing(1)},e.breakpoints.down("xs"),{width:"100%"})}})}));function Ue(){var e=o.a.useContext(Ze),t=e.Auth,a=e.setAuth,c=e.setAlertState,i=Object(r.useState)({username:"",password:""}),l=Object(s.a)(i,2),j=l[0],b=l[1],h=function(e){var t=e.target,a=t.name,n=t.value;b(Object(u.a)(Object(u.a)({},j),{},Object(d.a)({},a,n)))},f=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,W.login(j).then((function(e){a({type:"LOGIN",payload:{user:j.username,token:e.token}})}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),c({severity:"error",message:"Incorrect username or password",open:!0});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),g=De();return t.loggedIn?Object(n.jsx)(p.a,{to:"/"}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"Login",style:{textAlign:"center"},children:[Object(n.jsx)("h4",{children:"Login"}),Object(n.jsxs)("form",{className:g.root,onSubmit:f,children:[Object(n.jsx)(k.a,{onChange:h,value:j.username,type:"text",name:"username",label:"username",variant:"outlined"}),Object(n.jsx)(k.a,{onChange:h,value:j.password,type:"password",name:"password",label:"password",variant:"outlined"}),Object(n.jsx)(ae.a,{variant:"contained",color:"primary",name:"login",type:"submit",children:"Login"})]})]})})}a(147);var ze=a(223),Me=a(220);function Re(e){return Object(n.jsx)(Me.a,Object(u.a)({elevation:6,variant:"filled"},e))}var We=Object(U.a)((function(e){return{snackbar:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function Ge(e){var t=e.state,a=e.setState,r=We(),o=function(e,n){"clickaway"!==n&&a(Object(u.a)(Object(u.a)({},t),{},{open:!1}))};return Object(n.jsx)("div",{className:r.snackbar,children:Object(n.jsx)(ze.a,{open:t.open,autoHideDuration:3e3,onClose:o,children:Object(n.jsx)(Re,{onClose:o,severity:t.severity,children:t.message})})})}var Je=a(108),He=a(216),Ve=a(80),$e=a(79),Ye=a(217),Ke=Object(Je.a)();var qe,Qe=(qe={palette:{type:"dark",background:{default:L.a[900]},primary:{main:Ve.a[900]},secondary:{main:$e.a[900]}}},Object(Je.a)(Object(u.a)({overrides:{MuiPickersBasePicker:{container:Object(d.a)({backgroundColor:L.a[900]},Ke.breakpoints.down("xs"),{marginLeft:"-10px"})},MuiCard:{root:{backgroundColor:L.a[900]}},MuiDialogContent:{root:{backgroundColor:L.a[900]}},MuiPickersCalendarHeader:{iconButton:{backgroundColor:L.a[900]}}}},qe))),Xe=function(e){var t=e.component,a=e.loggedIn,r=Object(l.a)(e,["component","loggedIn"]);return Object(n.jsx)(p.b,Object(u.a)(Object(u.a)({},r),{},{render:function(e){return a?Object(n.jsx)(t,Object(u.a)({},e)):Object(n.jsx)(p.a,{to:"/login"})}}))},Ze=o.a.createContext({Auth:{loggedIn:!1,user:"",token:""},setAuth:function(){},setAlertState:function(){}});function et(){var e=Object(r.useReducer)((function(e,t){return"LOGIN"===t.type&&t.payload?(localStorage.setItem("user",t.payload.user),localStorage.setItem("token",t.payload.token),Object(u.a)(Object(u.a)({},e),{},{loggedIn:!0,user:t.payload.user,token:t.payload.token})):"LOGOUT"===t.type?(localStorage.clear(),Object(u.a)(Object(u.a)({},e),{},{loggedIn:!1,user:"",token:""})):e}),{loggedIn:!1,user:"",token:""}),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)({severity:void 0,message:"",open:!1}),i=Object(s.a)(c,2),l=i[0],d=i[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&W.checkAuth(e).then((function(t){return o({type:"LOGIN",payload:{user:t.username,token:e}})})).catch((function(a){"Unauthorized"===a.message?o({type:"LOGOUT"}):o({type:"LOGIN",payload:{user:t||"",token:e||""}})}))}),[]),Object(r.useEffect)((function(){!function(){J.apply(this,arguments)}()})),Object(n.jsxs)(He.a,{theme:Qe,children:[Object(n.jsx)(Ye.a,{}),Object(n.jsxs)(Ze.Provider,{value:{Auth:a,setAuth:o,setAlertState:d},children:[Object(n.jsxs)(j.a,{children:[Object(n.jsx)(Xe,{path:"/",loggedIn:a.loggedIn,setLoggedIn:o,component:Fe}),Object(n.jsx)(p.b,{exact:!0,path:"/login",children:Object(n.jsx)(Ue,{})})]}),Object(n.jsx)(Ge,{state:l,setState:d})]})]})}var tt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function at(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var nt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,233)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};i.a.render(Object(n.jsx)(et,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.ts");tt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):at(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):at(t,e)}))}}(),nt()}},[[148,1,2]]]);
//# sourceMappingURL=main.972905e9.chunk.js.map