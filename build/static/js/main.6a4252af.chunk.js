(this.webpackJsonpreact_client=this.webpackJsonpreact_client||[]).push([[0],{17:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(2),c=a.n(r),s=a(11),o=a.n(s),i=(a(17),a(6)),u=a.n(i),l=a(10),b=a(9),d=a(4),j=a(1),h=a(3);a(19);function m(e){var t=Object(r.useState)(e.entry),a=Object(h.a)(t,2),c=a[0],s=a[1];function o(e,t){return Object(n.jsx)("datalist",{id:t,children:e.map((function(e){return Object(n.jsx)("option",{value:e.name},e.id)}))})}function i(e){var t=e.target,a=t.name,n=t.value;s(Object(j.a)(Object(j.a)({},c),{},Object(d.a)({},a,n)))}return Object(n.jsx)("tbody",{children:Object(n.jsx)("tr",{children:e.fields.filter((function(e){return!e.name.includes("id")})).map((function(t){return Object(n.jsxs)("td",{children:["Amount"===t.name?Object(n.jsx)("span",{children:"$"}):null,Object(n.jsx)("input",{name:t.name,onBlur:function(t){e.handleChange?e.handleChange(t,e.i):console.log("nothing")},onChange:c.Person?i:void 0,className:"tableInput",value:c[t.name]||"",list:t.name}),"Source"===t.name&&e.sourcesState?o(e.sourcesState,t.name):null,"Person"===t.name&&e.personsState?o(e.personsState,t.name):null,"Narrow_category"===t.name&&e.narrowState?o(e.narrowState,t.name):null,"Broad_category"===t.name&&e.broadState?o(e.broadState,t.name):null]},e.i+t.name)}))})})}function f(e){return Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:e.state.schema.fields.filter((function(e){return!e.name.includes("id")})).map((function(e){return Object(n.jsx)("th",{children:e.name.replace("_"," ")},e.name)}))})}),e.state.data.map((function(t,a){return Object(n.jsx)(m,{entry:t,i:a,fields:e.state.schema.fields,handleChange:e.handleChange,sourcesState:e.sourcesState,personsState:e.personsState,broadState:e.broadState,narrowState:e.narrowState,setPersonsState:e.setPersonsState,setSourcesState:e.setSourcesState,setBroadState:e.setBroadState,setNarrowState:e.setNarrowState},a)}))]})}var O={expenses:function(e){return fetch("/api/expenses?year=".concat(e.year,"&month=").concat(e.month))},income:function(e){return fetch("/api/income?year=".concat(e.year,"&month=").concat(e.month))},pivot:function(e){return fetch("/api/pivot?year=".concat(e.year,"&month=").concat(e.month))},wallchart:function(){return fetch("/api/wallchart")},sources:function(){return fetch("/api/sources").then((function(e){return e.json()}))},persons:function(){return fetch("/api/persons").then((function(e){return e.json()}))},narrow:function(){return fetch("/api/narrows").then((function(e){return e.json()}))},broad:function(){return fetch("/api/broads").then((function(e){return e.json()}))}};var p=function(){var e=Object(r.useState)({form:"income",year:"",month:""}),t=Object(h.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Date:"",Source:"",Person:"",id:NaN,source_id:NaN,earner_id:NaN}]}),o=Object(h.a)(s,2),i=o[0],m=o[1],p=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Date:"",Source:"",Vendor:"",Broad_category:"",Narrow_category:"",Person:"",Notes:"",entry_id:NaN}]}),S=Object(h.a)(p,2),x=S[0],g=S[1],v=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Broad_category:"",Narrow_category:""}]}),y=Object(h.a)(v,2),w=y[0],N=y[1],_=Object(r.useState)([]),k=Object(h.a)(_,2),C=k[0],P=k[1],B=Object(r.useState)([]),D=Object(h.a)(B,2),F=D[0],I=D[1],L=Object(r.useState)([]),Y=Object(h.a)(L,2),A=Y[0],M=Y[1],E=Object(r.useState)([]),T=Object(h.a)(E,2),J=T[0],V=T[1];function W(e){var t=new Date(e.Date),a=t.getFullYear(),n=(1+t.getMonth()).toString();n=n.length>1?n:"0"+n;var r=t.getDate().toString(),c=n+"/"+(r=r.length>1?r:"0"+r)+"/"+a;return e.Date=c,e}function $(e){var t=e.target,n=t.name,r=t.value;c(Object(j.a)(Object(j.a)({},a),{},Object(d.a)({},n,r)))}function q(){return(q=Object(b.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=a.form,e.next=5,O[n](a);case 5:return e.next=7,e.sent.json();case 7:(r=e.sent).data=r.data.map(W),e.t0=n,e.next="expenses"===e.t0?12:"income"===e.t0?14:"pivot"===e.t0?16:18;break;case 12:return g(r),e.abrupt("break",18);case 14:return m(r),e.abrupt("break",18);case 16:return N(r),e.abrupt("break",18);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),console.error(e.t1);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function z(e,t){var a,n;switch(e){case"Person":a=F,n="earner_id";break;case"Source":a=C,n="source_id";break;case"Broad_category":a=A,n="broad_category_id";break;case"Narrow_category":a=J,n="narrow_category_id"}var r=a.filter((function(e){return e.name===t}))[0];return r?{id:n,dataListItem:r}:{id:null,dataListItem:null}}return Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(u.a.mark((function e(){var t,a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==C.length){e.next=6;break}return e.next=3,O.sources();case 3:t=e.sent,a=t.data,P(a);case 6:if(0!==F.length){e.next=11;break}return e.next=9,O.persons();case 9:n=e.sent,I(n.data);case 11:if(0!==J.length){e.next=16;break}return e.next=14,O.narrow();case 14:r=e.sent,V(r.data);case 16:if(0!==A.length){e.next=21;break}return e.next=19,O.broad();case 19:c=e.sent,M(c.data);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("h1",{children:"Finances!"}),Object(n.jsx)("img",{src:"/api/wallchart",alt:"Wall Chart"}),Object(n.jsxs)("form",{onSubmit:function(e){return q.apply(this,arguments)},className:"form-inline",children:[Object(n.jsxs)("select",{name:"form",value:a.form,onChange:$,children:[Object(n.jsx)("option",{value:"income",children:"Income"}),Object(n.jsx)("option",{value:"expenses",children:"Expenses"}),Object(n.jsx)("option",{value:"pivot",children:"Pivot Table"})]}),Object(n.jsx)("label",{htmlFor:"year2",children:"Year"}),Object(n.jsx)("input",{onChange:$,value:a.year,type:"text",id:"year2",className:"form-control",name:"year",placeholder:"YYYY"}),Object(n.jsx)("label",{htmlFor:"month2",children:"Month"}),Object(n.jsx)("input",{onChange:$,value:a.month,type:"text",id:"month2",className:"form-control",name:"month",placeholder:"MM"}),Object(n.jsx)("button",{className:"btn btn-success",children:"Submit"})]})]}),"income"===a.form&&i.data[0].id?Object(n.jsx)(f,{state:i,sourcesState:C,personsState:F,handleChange:function(e,t){var a=e.target,n=a.name,r=a.value,c=Object(l.a)(i.data),s=Object(j.a)(Object(j.a)({},c[t]),{},Object(d.a)({},n,r));if("Person"===n||"Source"===n){var o=z(n,r),u=o.id,b=o.dataListItem;u&&b&&(s=Object(j.a)(Object(j.a)({},s),{},Object(d.a)({},u,b.id)))}c[t]=s,m(Object(j.a)(Object(j.a)({},i),{},{data:c}))},setSourcesState:P,setPersonsState:I}):null,"expenses"===a.form&&x.data[0].entry_id?Object(n.jsx)(f,{state:x,personsState:F,broadState:A,narrowState:J,handleChange:function(e,t){var a=e.target,n=a.name,r=a.value,c=Object(l.a)(x.data),s=Object(j.a)(Object(j.a)({},c[t]),{},Object(d.a)({},n,r));if("Person"===n||"Broad_category"===n||"Narrow_category"===n){var o=z(n,r),i=o.id,u=o.dataListItem;i&&u&&(s=Object(j.a)(Object(j.a)({},s),{},Object(d.a)({},i,u.id)))}c[t]=s,g(Object(j.a)(Object(j.a)({},x),{},{data:c}))},setPersonsState:I,setBroadState:M,setNarrowState:V}):null,"pivot"===a.form&&w?Object(n.jsx)(f,{state:w}):null]})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,21)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(p,{})}),document.getElementById("root")),S()}},[[20,1,2]]]);
//# sourceMappingURL=main.6a4252af.chunk.js.map