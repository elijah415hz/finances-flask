{"version":3,"sources":["components/InputRow.tsx","components/StaticRow.tsx","components/Table.tsx","utils/API.tsx","utils/db.tsx","components/AddExpensesForm.tsx","components/AddIncomeForm.tsx","pages/Home.tsx","pages/Login.tsx","components/Alert.tsx","components/SnackBar.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["StyledTableCell","withStyles","theme","createStyles","head","backgroundColor","palette","common","black","color","white","body","fontSize","padding","maxWidth","TableCell","StyledTableRow","root","action","hover","paddingLeft","TableRow","InputRow","props","useState","Amount","state","setState","makeDataList","propsState","id","map","entry","value","name","handleInputRowChange","event","target","useEffect","fields","filter","column","includes","onBlur","e","handleChange","i","onChange","className","list","style","width","dataLists","source","person_earner","narrow_category","broad_category","vendor","IconButton","onClick","handleUpdate","aria-label","deleteEntry","entry_id","StaticRow","ReportTable","primary","main","classes","makeStyles","table","minWidth","useStyles","TableContainer","component","Paper","Table","TableHead","schema","replace","TableBody","data","form","checkStatus","res","parseMethod","status","Error","json","text","db","API","expenses","token","yearMonthObj","fetch","year","month","headers","then","postExpenses","method","JSON","stringify","postBatchExpenses","postIncome","postBatchIncome","deleteExpenses","updateExpenses","income","updateIncome","deleteIncome","pivot","dataList","login","checkAuth","a","openDB","upgrade","createObjectStore","autoIncrement","navigator","onLine","checkDatabase","saveRecord","record","put","localStorage","getItem","getAll","pendingExpenses","length","clear","pendingIncome","console","error","window","addEventListener","AddRecordsForm","React","useContext","AuthContext","Auth","setAuth","setAlertState","initialFormState","Date","now","NaN","person_id","broad_category_id","narrow_category_id","notes","formState","setFormState","currentCategory","setCurrentCategory","categories","narrowCategories","person","handleFormChange","category","preventDefault","formStateConvertedDate","toLocaleDateString","severity","message","open","type","onSubmit","utils","DateFnsUtils","disableToolbar","variant","format","margin","label","date","KeyboardButtonProps","TextField","InputLabelProps","shrink","InputProps","startAdornment","InputAdornment","position","inputProps","step","FormControl","formControl","InputLabel","htmlFor","Select","labelId","MenuItem","Button","hideForms","amount","earner_id","Home","getUTCFullYear","getUTCMonth","Source","Person","source_id","incomeTableState","setIncomeTableState","Vendor","Broad_category","Narrow_category","Notes","expensesTableState","setExpensesTableState","pivotTableState","setPivotTableState","dataListsState","setDataListsState","showAddExpensesForm","setShowAddExpensesForm","showAddIncomeForm","setShowAddIncomeForm","showReportsForm","setShowReportsForm","formatDates","toString","day","getUTCDate","dateString","route","response","assignId","dataListItem","index","newExpensesTableStateData","updatedRow","err","log","newIncomeTableStateData","spacing","selectEmpty","marginTop","display","justifyContent","flexWrap","breakpoints","up","down","wallchart","logoutBtn","float","offline","textAlign","setOffline","datalists","getDataLists","AppBar","Container","src","alt","Login","username","password","loginFormState","setLoginFormState","failure","setFailure","inputChange","formSubmit","newToken","payload","user","loggedIn","to","Alert","elevation","snackbar","CustomizedSnackbar","handleClose","reason","Snackbar","autoHideDuration","onClose","ProtectedRoute","Component","rest","render","createContext","App","useReducer","setItem","undefined","alertState","catch","testDatabase","Provider","path","setLoggedIn","exact","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById","URL","process","href","origin","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.8c33e828.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { dataListStateType, tableDataEntry, allDataListsType } from '../interfaces/Interfaces'\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport { IconButton, TableCell, TableRow } from '@material-ui/core'\r\nimport { withStyles, makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\n\r\n\r\nconst StyledTableCell = withStyles((theme: Theme) =>\r\n  createStyles({\r\n    head: {\r\n      backgroundColor: theme.palette.common.black,\r\n      color: theme.palette.common.white,\r\n    },\r\n    body: {\r\n      fontSize: 14,\r\n      padding: 0,\r\n      maxWidth: '10ch',\r\n    },\r\n  }),\r\n)(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      '&:nth-of-type(odd)': {\r\n        backgroundColor: theme.palette.action.hover,\r\n      },\r\n      '& input': {\r\n          backgroundColor: 'inherit',\r\n          paddingLeft: 0,\r\n      }\r\n    },\r\n  }),\r\n)(TableRow);\r\n\r\nexport default function InputRow(props:\r\n    {\r\n        entry: tableDataEntry,\r\n        i: number,\r\n        fields: { name: string }[],\r\n        dataLists?: allDataListsType\r\n        handleChange: Function,\r\n        handleUpdate: Function,\r\n        deleteEntry: Function\r\n    }) {\r\n\r\n    const [state, setState] = useState<tableDataEntry>({ Amount: \"\" })\r\n\r\n    function makeDataList(propsState: dataListStateType[], id: string) {\r\n        return (\r\n            <datalist id={id}>\r\n                {propsState.map((entry: dataListStateType) => {\r\n                    return (\r\n                        <option\r\n                            value={entry.name}\r\n                            key={entry.id}\r\n                        />\r\n                    )\r\n                })}\r\n            </datalist>\r\n        )\r\n    }\r\n\r\n    function handleInputRowChange(event: React.ChangeEvent<HTMLInputElement>): void {\r\n        let { name, value } = event.target;\r\n        setState({ ...state, [name]: value })\r\n    }\r\n\r\n    useEffect(() => {\r\n        setState(props.entry)\r\n    }, [props.entry])\r\n\r\n    return (\r\n        <StyledTableRow>\r\n            {props.fields\r\n                .filter(column => !column.name.includes(\"id\"))\r\n                .map(column => {\r\n                    return (\r\n                        <StyledTableCell \r\n                            \r\n                        >\r\n                            {column.name === 'Amount' ? <span>$</span> : null}\r\n                            <input\r\n                                name={column.name}\r\n                                onBlur={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n                                    props.handleChange(e, props.i)\r\n                                }}\r\n                                onChange={handleInputRowChange}\r\n                                className=\"tableInput\"\r\n                                value={state[column.name as keyof tableDataEntry] || \"\"}\r\n                                list={column.name}\r\n                                style={{width: '80%'}}\r\n                                // style={{width: `${(state[column.name as keyof tableDataEntry]?.toString().length || 12) + 3.5}ch`}}\r\n                            />\r\n                            {column.name === 'Source' && props.dataLists?.source ? (\r\n                                makeDataList(props.dataLists?.source, column.name)\r\n                            ) : null}\r\n                            {column.name === 'Person' && props.dataLists?.person_earner ? (\r\n                                makeDataList(props.dataLists?.person_earner, column.name)\r\n                            ) : null}\r\n                            {column.name === 'Narrow_category' && props.dataLists?.narrow_category ? (\r\n                                makeDataList(props.dataLists?.narrow_category, column.name)\r\n                            ) : null}\r\n                            {column.name === 'Broad_category' && props.dataLists?.broad_category ? (\r\n                                makeDataList(props.dataLists?.broad_category, column.name)\r\n                            ) : null}\r\n                            {column.name === 'Vendor' && props.dataLists?.vendor ? (\r\n                                makeDataList(props.dataLists?.vendor, column.name)\r\n                            ) : null}\r\n                        </StyledTableCell>\r\n                    )\r\n                })}\r\n            <StyledTableCell>\r\n                <IconButton\r\n                    color=\"primary\"\r\n                    onClick={() => props.handleUpdate(props.i)}\r\n                >\r\n                    <SaveIcon />\r\n                </IconButton>\r\n            </StyledTableCell>\r\n            <StyledTableCell>\r\n                <IconButton\r\n                    aria-label=\"delete\"\r\n                    color=\"secondary\"\r\n                    onClick={() => props.deleteEntry(state.entry_id || state.id)}\r\n                >\r\n                    <DeleteIcon />\r\n                </IconButton>\r\n            </StyledTableCell>\r\n        </StyledTableRow>\r\n    )\r\n}","import React from 'react'\r\nimport type {tableDataEntry} from '../interfaces/Interfaces'\r\n\r\nexport default function StaticRow(props:\r\n    {\r\n        entry: tableDataEntry,\r\n        i: number,\r\n        fields: { name: string }[],\r\n    }) {\r\n\r\n    return (\r\n        <tbody>\r\n            <tr>\r\n                {props.fields\r\n                    .filter(column => !column.name.includes(\"id\"))\r\n                    .map(column => {\r\n                        return (\r\n                            <td key={props.i + column.name}>\r\n                                {column.name === 'Amount' ? <span>$</span> : null}\r\n                                <span\r\n                                    className=\"tableInput\"\r\n                                >{props.entry[column.name as keyof tableDataEntry] || \"\"}\r\n                                </span>\r\n\r\n                            </td>\r\n                        )\r\n                    })}\r\n            </tr>\r\n        </tbody>\r\n    )\r\n}","import React from 'react'\r\nimport InputRow from './InputRow'\r\nimport StaticRow from './StaticRow'\r\nimport type { tableDataEntry, allDataListsType } from \"../interfaces/Interfaces\"\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport { makeStyles, createStyles, withStyles, lighten, Theme } from '@material-ui/core/styles';\r\n\r\n\r\n\r\nexport default function ReportTable(props:\r\n    {\r\n        state:\r\n        {\r\n            schema:\r\n            {\r\n                fields: { name: string }[]\r\n            },\r\n            data: tableDataEntry[]\r\n\r\n        },\r\n        dataLists?: allDataListsType\r\n        handleChange: Function,\r\n        handleUpdate: Function,\r\n        deleteEntry: Function,\r\n        form?: string\r\n    }) {\r\n\r\n    const StyledTableCell = withStyles((theme: Theme) =>\r\n        createStyles({\r\n            head: {\r\n                backgroundColor: theme.palette.primary.main,\r\n                color: theme.palette.common.white,\r\n            },\r\n\r\n        }),\r\n    )(TableCell);\r\n\r\n    const useStyles = makeStyles((theme: Theme) =>\r\n        createStyles({\r\n            table: {\r\n                minWidth: 650,\r\n            },\r\n        })\r\n    );\r\n    const classes = useStyles();\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Table className={classes.table}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        {props.state.schema.fields\r\n                            .filter(column => !column.name.includes(\"id\"))\r\n                            .map(column => {\r\n                                return (\r\n                                    <StyledTableCell key={column.name}>\r\n                                        {column.name.replace(\"_\", \" \")}\r\n                                    </StyledTableCell>\r\n                                )\r\n                            })}\r\n                        <StyledTableCell><span>Save</span></StyledTableCell>\r\n                        <StyledTableCell><span>Delete</span></StyledTableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody className=\"tableBody\">\r\n                    {(props.state.data).map((entry: tableDataEntry, i: number) => {\r\n                        return props.form === \"pivot\" ?\r\n                            <StaticRow\r\n                                entry={entry}\r\n                                i={i}\r\n                                key={entry.entry_id || entry.id}\r\n                                fields={props.state.schema.fields}\r\n                            /> :\r\n                            <InputRow\r\n                                entry={entry}\r\n                                i={i}\r\n                                key={i}\r\n                                fields={props.state.schema.fields}\r\n                                handleChange={props.handleChange}\r\n                                handleUpdate={props.handleUpdate}\r\n                                dataLists={props.dataLists}\r\n                                deleteEntry={props.deleteEntry}\r\n                            />\r\n                    })}\r\n                </TableBody>\r\n\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n}","import type {\r\n    allDataListsType, \r\n    formStateType, \r\n    tableDataEntry, \r\n    tableType,\r\n    expensesFormType,\r\n    incomeFormType} from '../interfaces/Interfaces'\r\n\r\n\r\nfunction checkStatus<T>(res: Response, parseMethod: string): Promise<T> {\r\n    if (res.status === 401) {\r\n        throw new Error(\"Unauthorized\")\r\n    }\r\n    if (res.status !== 200) {\r\n        throw new Error(\"Error! \" + res.status)\r\n    }\r\n    if (parseMethod === 'json'){\r\n        return res.json() as Promise<T>\r\n    } else {\r\n        return res.text() as unknown as Promise<T>\r\n    }\r\n}\r\n\r\nconst API = {\r\n    expenses: function (token: string | null, yearMonthObj: formStateType): Promise<{schema: { fields: [] }, data: tableDataEntry[]}> {\r\n        return fetch(`/api/expenses/${yearMonthObj.year}/${yearMonthObj.month}`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<tableType>(res, 'json'))\r\n    },\r\n    postExpenses: function (token: string | null, data:expensesFormType): Promise<Response | string> {\r\n        return fetch(`/api/expenses/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    postBatchExpenses: function (token: string | null, data:expensesFormType[]): Promise<Response | string> {\r\n        return fetch(`/api/expenses/batch`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    postIncome: function (token: string | null, data:incomeFormType): Promise<Response | string> {\r\n        return fetch(`/api/income/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    postBatchIncome: function (token: string | null, data:incomeFormType[]): Promise<Response | string> {\r\n        return fetch(`/api/income/batch`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    deleteExpenses: function (token: string | null, id: number | undefined): Promise<Response | string> {\r\n        return fetch(`/api/expenses/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    updateExpenses: function (token: string | null, data: tableDataEntry): Promise<Response | string> {\r\n        return fetch(`/api/expenses/${data.entry_id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    income: function (token: string | null, yearMonthObj: formStateType): Promise<{schema: { fields: [] }, data: tableDataEntry[]}> {\r\n        return fetch(`/api/income/${yearMonthObj.year}/${yearMonthObj.month}`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<tableType>(res, 'json'))\r\n    },\r\n    updateIncome: function (token: string | null, data: tableDataEntry): Promise<Response | string> {\r\n        return fetch(`/api/income/${data.id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    deleteIncome: function (token: string | null, id: number | undefined): Promise<Response | string> {\r\n        return fetch(`/api/income/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    pivot: function (token: string | null, yearMonthObj: formStateType): Promise<{schema: { fields: [] }, data: tableDataEntry[]}> {\r\n        return fetch(`/api/expenses/pivot/${yearMonthObj.year}/${yearMonthObj.month}`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<tableType>(res, 'json'))\r\n    },\r\n    dataList: function (token: string | null): Promise<allDataListsType> {\r\n        return fetch(`/api/datalists`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res => checkStatus<allDataListsType>(res, 'json'))\r\n    },\r\n    login: function (data: { username: string, password: string }): Promise<{ token: string }> {\r\n        return fetch('/auth/login', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res => checkStatus<{ token: string }>(res, 'json'))\r\n    },\r\n    checkAuth: function (token: string | null): Promise<{username: string, token: string}> {\r\n        return fetch(`/auth/checkAuth`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res =>checkStatus<{username: string, token: string}>(res, 'json'))\r\n    }\r\n}\r\n\r\nexport default API","import { openDB, DBSchema, IDBPDatabase } from 'idb'\nimport { expensesFormType, incomeFormType } from '../interfaces/Interfaces';\nimport API from './API';\n\ninterface financesDB extends DBSchema {\n  expenses: {\n    value: {\n      Amount: number,\n      Date: Date | null,\n      person_id: number,\n      vendor: string,\n      broad_category_id: number,\n      narrow_category_id: number,\n      notes: string\n    },\n    key: string\n  },\n  income: {\n    value: {\n      date: Date | null,\n      amount: number,\n      earner_id: number,\n      source: string,\n    },\n    key: string\n  }\n}\n\n\nlet db: IDBPDatabase<financesDB>;\nexport async function testDatabase() {\n  db = await openDB<financesDB>(\"pendingFinances\", 2, {\n    upgrade(db) {\n      db.createObjectStore('expenses', { autoIncrement: true })\n      db.createObjectStore('income', { autoIncrement: true })\n    }\n  });\n\n  if (navigator.onLine) {\n    checkDatabase();\n  }\n}\n\nexport async function saveRecord(table: 'income' | 'expenses', record: expensesFormType | incomeFormType) {\n  await db.put(table, record);\n}\n\nasync function checkDatabase() {\n  let token = localStorage.getItem('token')\n  try {\n    const pendingExpenses = await db.getAll(\"expenses\");\n    if (pendingExpenses.length > 0) {\n      await API.postBatchExpenses(token, pendingExpenses)\n      // delete records if successful\n      db.clear('expenses')\n    }\n    const pendingIncome = await db.getAll(\"income\");\n    if (pendingIncome.length > 0) {\n      await API.postBatchIncome(token, pendingIncome)\n      // delete records if successful\n      db.clear('income')\n    }\n  } catch (err) {\n    console.error(err)\n  }\n}\n\n// listen for app coming back online\nwindow.addEventListener(\"online\", checkDatabase);","import React, { useState } from 'react'\r\nimport API from '../utils/API'\r\nimport { saveRecord } from '../utils/db'\r\nimport { AuthContext } from '../App'\r\nimport type { expensesFormType, categoryType } from '../interfaces/Interfaces'\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Select,\r\n    TextField,\r\n    InputAdornment\r\n} from '@material-ui/core';\r\n// import 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n    MuiPickersUtilsProvider,\r\n    KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport CustomizedSnackbar from './SnackBar'\r\n\r\n\r\n\r\n\r\nexport default function AddRecordsForm(props: {\r\n    classes: { root: string, formControl: string },\r\n    hideForms: Function\r\n}) {\r\n    const { Auth, setAuth, setAlertState } = React.useContext(AuthContext)\r\n\r\n    const initialFormState = {\r\n        Date: new Date(Date.now()),\r\n        Amount: NaN,\r\n        person_id: NaN,\r\n        broad_category_id: NaN,\r\n        narrow_category_id: NaN,\r\n        vendor: \"\",\r\n        notes: \"\"\r\n    }\r\n\r\n    // Form control state\r\n    const [formState, setFormState] = useState<expensesFormType>(initialFormState)\r\n\r\n    // State to hold category info\r\n    const [currentCategory, setCurrentCategory] = useState<categoryType>({\r\n        name: \"\",\r\n        id: NaN,\r\n    })\r\n  \r\n    // Hardcoding categories because the database is a mess...\r\n    const categories = [\r\n        {\r\n            name: \"Groceries\", id: 6, narrowCategories: [\r\n                { name: \"Food\", id: 10 },\r\n                { name: \"Alcohol\", id: 49 },\r\n                { name: \"Entertaining\", id: 7 }\r\n            ]\r\n        },\r\n        {\r\n            name: \"Health and Body\", id: 12, narrowCategories: [\r\n                { name: \"Toiletries\", id: 27 },\r\n                { name: \"Make-up\", id: 51 },\r\n                { name: \"Drugs/Supplements\", id: 273 },\r\n                { name: \"Doctors Visits\", id: 24 },\r\n                { name: \"Gym\", id: 34 },\r\n                { name: \"Essential Oils\", id: 58 },\r\n                { name: \"Massages/Body Care\", id: 41 }\r\n            ], person: true\r\n        },\r\n        {\r\n            name: \"Work\", id: 8, narrowCategories: [\r\n                { name: \"Road Food Out\", id: 20 },\r\n                { name: \"Road Groceries\", id: 37 },\r\n                { name: \"Road Coffee\", id: 21 },\r\n                { name: \"Business Food\", id: 70 },\r\n                { name: \"Scores\", id: 68 },\r\n                { name: \"Office Supplies\", id: 11 },\r\n                { name: \"Plane Tickets\", id: 18 },\r\n                { name: \"Transportation\", id: 9 },\r\n                { name: \"Union Dues\", id: 55 },\r\n                { name: \"Dry Cleaning\", id: 14 },\r\n                { name: \"Concert Tickets\", id: 655 },\r\n                { name: \"Lessons/Coachings\", id: 69 },\r\n                { name: \"Application fees\", id: 61 },\r\n                { name: \"Pianist Fees\", id: 656 }\r\n            ], person: true\r\n        },\r\n        {\r\n            name: \"Eating Out\", id: 3, narrowCategories: [\r\n                { name: \"Date\", id: 28 },\r\n                { name: \"Friends\", id: 3 },\r\n                { name: \"Snacks\", id: 17 },\r\n                { name: \"On the Run\", id: 8 },\r\n                { name: \"Coffee\", id: 30 },\r\n                { name: \"Ordering in\", id: 48 },\r\n            ]\r\n        },\r\n        {\r\n            name: \"Home Goods\", id: 9, narrowCategories: [\r\n                { name: \"Kitchen\", id: 12 },\r\n                { name: \"Decorating\", id: 29 },\r\n                { name: \"Furniture\", id: 16 },\r\n                { name: \"Paper Products/Cleaning\", id: 15 },\r\n                { name: \"Office Supplies\", id: 11 },\r\n                { name: \"Hobbies/Creative\", id: 23 },\r\n                { name: \"Linens\", id: 201 },\r\n            ]\r\n        },\r\n        {\r\n            name: \"New York Home\", id: 1, narrowCategories: [\r\n                { name: \"Rent\", id: 40 },\r\n                { name: \"Internet\", id: 1 },\r\n                { name: \"Electricity\", id: 26 },\r\n            ]\r\n        },\r\n        {\r\n            name: \"Seattle Home\", id: 7, narrowCategories: [\r\n                { name: \"Mortgage\", id: 39 },\r\n                { name: \"HOA\", id: 38 },\r\n                { name: \"Taxes\", id: 657 },\r\n                { name: \"Internet\", id: 1 },\r\n                { name: \"Electricity\", id: 26 },\r\n                { name: \"Manager/Maintanence\", id: 42 },\r\n                { name: \"Insurance\", id: 134 },\r\n            ]\r\n        },\r\n        { name: \"Clothes\", id: 11, person: true },\r\n        {\r\n            name: \"Laundry\", id: 4, narrowCategories: [\r\n                { name: \"Laundry\", id: 4 },\r\n                { name: \"Dry Cleaning\", id: 14 },\r\n            ]\r\n        },\r\n        {\r\n            name: \"Entertainment\", id: 14, narrowCategories: [\r\n                { name: \"Live Shows\", id: 32 },\r\n                { name: \"Movies\", id: 44 },\r\n                { name: \"Museums\", id: 53 },\r\n                { name: \"Books\", id: 36 },\r\n                { name: \"Home (Netflix, Spotify, Amazon, Movie Rentals)\", id: 46 },\r\n                { name: \"Newspaper/Magazine\", id: 47 },\r\n            ]\r\n        },\r\n        { name: \"Philanthropy\", id: 17 },\r\n        {\r\n            name: \"Electronics\", id: 5, narrowCategories: [\r\n                { name: \"Phone Bill\", id: 33 },\r\n                { name: \"Computers\", id: 588 },\r\n                { name: \"Accessories\", id: 31 },\r\n                { name: \"Cloud Storage Fees\", id: 6 },\r\n            ]\r\n        },\r\n        { name: \"Gifts\", id: 13 },\r\n        {\r\n            name: \"Transportation\", id: 2, narrowCategories: [\r\n                { name: \"Gas\", id: 22 },\r\n                { name: \"Repairs\", id: 577 },\r\n                { name: \"Insurance\", id: 134 },\r\n                { name: \"Bike\", id: 567 },\r\n                { name: \"Subway\", id: 35 },\r\n                { name: \"Taxi/Lyft\", id: 5 },\r\n                { name: \"Car Rental\", id: 2 },\r\n                { name: \"Seattle Airplanes\", id: 276 },\r\n                { name: \"Parking\", id: 209 },\r\n            ]\r\n        },\r\n        {\r\n            name: \"Maggie\", id: 10, narrowCategories: [\r\n                { name: \"Food\", id: 10 },\r\n                { name: \"Litter\", id: 13 },\r\n                { name: \"Vet Bills\", id: 275 },\r\n                { name: \"Toys\", id: 60 },\r\n            ]\r\n        },\r\n        {\r\n            name: \"Travel/Leisure\", id: 16, narrowCategories: [\r\n                { name: \"Planes\", id: 62 },\r\n                { name: \"Ground Transportation\", id: 52 },\r\n                { name: \"Food\", id: 10 },\r\n                { name: \"Experiences\", id: 64 },\r\n                { name: \"Lodging\", id: 43 },\r\n            ]\r\n        },\r\n        {\r\n            name: \"Legal\", id: 19, narrowCategories: [\r\n                { name: \"Documents\", id: 202 },\r\n                { name: \"Services\", id: 63 },\r\n            ]\r\n        },\r\n        { name: \"Student Loans\", id: 15 },\r\n        { name: \"Education\", id: 18, person: true },\r\n        {\r\n            name: \"Theo\", id: 7, narrowCategories: [\r\n                { name: \"Baby sitting\", id: 274 },\r\n                { name: \"Toys\", id: 60 },\r\n            ]\r\n        }\r\n    ]\r\n\r\n    const persons = [\r\n        { name: \"Alexa\", id: 3 },\r\n        { name: \"Eli\", id: 1 },\r\n        { name: \"Theo\", id: 2 }\r\n    ]\r\n\r\n    function handleFormChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }>): void {\r\n        let name = event.target.name as keyof typeof formState\r\n        setFormState({ ...formState, [name]: event.target.value })\r\n        if (name === 'broad_category_id') {\r\n            let category = categories.filter(i => i.id === event.target.value)[0]\r\n            setCurrentCategory(category)\r\n        }\r\n    }\r\n\r\n    function handleDateChange(date: Date | null) {\r\n        setFormState({ ...formState, Date: date });\r\n    };\r\n\r\n    async function handleFormSubmit(event: React.SyntheticEvent): Promise<any> {\r\n        event.preventDefault()\r\n        let formStateConvertedDate: any = { ...formState }\r\n        formStateConvertedDate.Date = formStateConvertedDate.Date?.toLocaleDateString(\"en-US\")\r\n        try {\r\n            await API.postExpenses(Auth.token, formStateConvertedDate)\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"Record Saved!\",\r\n                open: true\r\n            })\r\n        } catch (err) {\r\n            console.error(err.message)\r\n            saveRecord('expenses', formStateConvertedDate)\r\n            if (err.message === \"Unauthorized\") {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n            setAlertState({\r\n                severity: \"warning\",\r\n                message: \"Record Saved Locally\",\r\n                open: true\r\n            })        \r\n        } finally {\r\n            setFormState(initialFormState)\r\n            setCurrentCategory({\r\n                name: \"\",\r\n                id: NaN\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={props.classes.root}>\r\n            <form className={props.classes.root} onSubmit={handleFormSubmit}>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"MM/dd/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-inline\"\r\n                        name=\"Date\"\r\n                        label=\"Date\"\r\n                        value={formState.Date}\r\n                        onChange={handleDateChange}\r\n                        KeyboardButtonProps={{\r\n                            'aria-label': 'change date',\r\n                        }}\r\n                    />\r\n                </MuiPickersUtilsProvider>\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.vendor}\r\n                    label=\"Vendor\"\r\n                    name=\"vendor\"\r\n                    type=\"string\"\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.Amount}\r\n                    label=\"Amount\"\r\n                    name=\"Amount\"\r\n                    type=\"number\"\r\n                    InputProps={{\r\n                        startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n                    }}\r\n                    inputProps={{ step: \"0.01\" }}\r\n                />\r\n                <FormControl\r\n                    className={props.classes.formControl}>\r\n                    <InputLabel htmlFor=\"broad_category\">Broad Category</InputLabel>\r\n                    <Select\r\n                        onChange={handleFormChange}\r\n                        value={formState.broad_category_id}\r\n                        name=\"broad_category_id\"\r\n                        labelId=\"broad_category\"\r\n                        label=\"Broad Category\"\r\n                    >\r\n                        {categories.map(i => (\r\n                            <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n                {currentCategory.narrowCategories ? (\r\n                    <FormControl className={props.classes.formControl}>\r\n                        <InputLabel htmlFor=\"narrow_category\">Narrow Category</InputLabel>\r\n                        <Select\r\n                            onChange={handleFormChange}\r\n                            value={formState.narrow_category_id}\r\n                            name=\"narrow_category_id\"\r\n                            labelId=\"narrow_category\"\r\n                            label=\"Narrow Category\"\r\n                        >\r\n                            {/* Get the list of narrow categories corresponding to the selected broad category */}\r\n                            {currentCategory.narrowCategories?.map(i => (\r\n                                <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                ) : null}\r\n                {currentCategory.person ? (\r\n\r\n                    <FormControl className={props.classes.formControl}>\r\n                        <InputLabel htmlFor=\"person_id\">Person</InputLabel>\r\n                        <Select\r\n                            onChange={handleFormChange}\r\n                            value={formState.person_id}\r\n                            name=\"person_id\"\r\n                            labelId=\"person_id\"\r\n                            label=\"Person\"\r\n                        >\r\n                            {persons.map(i => (\r\n                                <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                ) : null}\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.notes}\r\n                    label=\"Notes\"\r\n                    name=\"notes\"\r\n                    type=\"string\"\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                >Submit</Button>\r\n                <Button\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                        setFormState(initialFormState)\r\n                        props.hideForms()\r\n                    }\r\n                    }\r\n                >Close</Button>\r\n            </form>\r\n            {/* <CustomizedSnackbar\r\n                severity=\"success\"\r\n                message=\"Record Saved\"\r\n                open={showSuccess}\r\n                setOpen={setShowSuccess} \r\n                />\r\n            <CustomizedSnackbar\r\n                severity=\"warning\"\r\n                message=\"Record Saved Locally\"\r\n                open={showOfflineWarning}\r\n                setOpen={setShowOfflineWarning} \r\n                /> */}\r\n        </div>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport API from '../utils/API'\r\nimport { AuthContext } from '../App'\r\nimport type { incomeFormType } from '../interfaces/Interfaces'\r\nimport { \r\n    Button,\r\n    FormControl, \r\n    InputLabel, \r\n    MenuItem, \r\n    Select, \r\n    TextField,\r\n    InputAdornment\r\n} from '@material-ui/core';\r\n// import 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n    MuiPickersUtilsProvider,\r\n    KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport { saveRecord } from '../utils/db';\r\nimport CustomizedSnackbar from './SnackBar'\r\n\r\n\r\n\r\nexport default function AddRecordsForm(props: {\r\n    classes: { root: string, formControl: string },\r\n    hideForms: Function\r\n}) {\r\n    const { Auth, setAuth, setAlertState } = React.useContext(AuthContext)\r\n\r\n    const initialFormState = {\r\n        date: new Date(Date.now()),\r\n        amount: NaN,\r\n        earner_id: NaN,\r\n        source: \"\",\r\n    }\r\n\r\n    // Form control state\r\n    const [formState, setFormState] = useState<incomeFormType>(initialFormState)\r\n\r\n    const earners = [\r\n        { name: \"Alexa\", id: 3 },\r\n        { name: \"Eli\", id: 1 },\r\n        { name: \"Rent\", id: 8 },\r\n        { name: \"Sales\", id: 10 },\r\n        { name: \"Gift\", id: 11 },\r\n    ]\r\n\r\n    // State for snackbars\r\n    const [showSuccess, setShowSuccess] = useState<boolean>(false)\r\n    const [showOfflineWarning, setShowOfflineWarning] = useState<boolean>(false)\r\n\r\n    function handleFormChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }>): void {\r\n        let name = event.target.name as keyof typeof formState\r\n        setFormState({ ...formState, [name]: event.target.value })\r\n    }\r\n\r\n    function handleDateChange(date: Date | null) {\r\n        setFormState({ ...formState, date: date });\r\n    };\r\n\r\n    async function handleFormSubmit(event: React.SyntheticEvent): Promise<any> {\r\n        event.preventDefault()\r\n        let formStateConvertedDate: any = { ...formState }\r\n        try {\r\n            formStateConvertedDate.date = formStateConvertedDate.date?.toLocaleDateString(\"en-US\")\r\n            await API.postIncome(Auth.token, formStateConvertedDate)\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"Record Saved!\",\r\n                open: true\r\n            })        \r\n        } catch (err) {\r\n            console.error(err.message)\r\n            saveRecord('income', formStateConvertedDate)\r\n            setAlertState({\r\n                severity: \"warning\",\r\n                message: \"Record Saved Locally\",\r\n                open: true\r\n            })            \r\n            if (err.message === \"Unauthorized\") {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n        } finally {\r\n            setFormState(initialFormState)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={props.classes.root}>\r\n            <form className={props.classes.root} onSubmit={handleFormSubmit}>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"MM/dd/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-inline\"\r\n                        name=\"Date\"\r\n                        label=\"Date\"\r\n                        value={formState.date}\r\n                        onChange={handleDateChange}\r\n                        KeyboardButtonProps={{\r\n                            'aria-label': 'change date',\r\n                        }}\r\n                    />\r\n                </MuiPickersUtilsProvider>\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.source}\r\n                    label=\"Source\"\r\n                    name=\"source\"\r\n                    type=\"string\"\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.amount}\r\n                    label=\"Amount\"\r\n                    name=\"amount\"\r\n                    type=\"number\"\r\n                    InputProps={{\r\n                        startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n                      }}\r\n                    inputProps={{step:\"0.01\"}}\r\n                />\r\n                <FormControl className={props.classes.formControl}>\r\n                    <InputLabel htmlFor=\"earner_id\">Person</InputLabel>\r\n                    <Select\r\n                        onChange={handleFormChange}\r\n                        value={formState.earner_id}\r\n                        name=\"earner_id\"\r\n                        labelId=\"earner_id\"\r\n                        label=\"Person\"\r\n                    >\r\n                        {earners.map(i => (\r\n                            <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n\r\n                <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                >Submit</Button>\r\n                <Button\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                        setFormState(initialFormState)\r\n                        props.hideForms()\r\n                    }}\r\n                >Close</Button>\r\n            </form>\r\n            {/* <CustomizedSnackbar\r\n                severity=\"success\"\r\n                message=\"Record Saved\"\r\n                open={showSuccess}\r\n                setOpen={setShowSuccess} \r\n                />\r\n            <CustomizedSnackbar\r\n                severity=\"warning\"\r\n                message=\"Record Saved Locally\"\r\n                open={showOfflineWarning}\r\n                setOpen={setShowOfflineWarning} \r\n                /> */}\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport ReportTable from '../components/Table';\r\nimport AddExpensesForm from '../components/AddExpensesForm'\r\nimport AddIncomeForm from '../components/AddIncomeForm'\r\nimport API from '../utils/API'\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { AuthContext } from '../App'\r\nimport type { tableDataEntry, dataListStateType, allDataListsType, formStateType, InputName } from '../interfaces/Interfaces'\r\nimport { AppBar, Button, Container, FormControl, InputLabel, MenuItem, Select, TextField } from '@material-ui/core';\r\n\r\nfunction Home() {\r\n    const { Auth, setAuth } = React.useContext(AuthContext)\r\n    const [formState, setFormState] = useState<formStateType>(\r\n        {\r\n            form: \"expenses\",\r\n            year: new Date(Date.now()).getUTCFullYear(),\r\n            month: new Date(Date.now()).getUTCMonth() + 1\r\n        }\r\n    )\r\n\r\n    const [incomeTableState, setIncomeTableState] = useState<{ schema: { fields: [] }, data: tableDataEntry[] }>(\r\n        {\r\n            schema: { fields: [] },\r\n            data: [{\r\n                Amount: \"\",\r\n                Date: \"\",\r\n                Source: \"\",\r\n                Person: \"\",\r\n                id: NaN,\r\n                source_id: NaN,\r\n                earner_id: NaN\r\n            }]\r\n        }\r\n    )\r\n\r\n    const [expensesTableState, setExpensesTableState] = useState<{ schema: { fields: [] }, data: tableDataEntry[] }>(\r\n        {\r\n            schema: { fields: [] },\r\n            data: [{\r\n                Amount: \"\",\r\n                Date: \"\",\r\n                Source: \"\",\r\n                Vendor: \"\",\r\n                Broad_category: \"\",\r\n                Narrow_category: \"\",\r\n                Person: \"\",\r\n                Notes: \"\",\r\n                entry_id: NaN\r\n            }]\r\n        }\r\n\r\n    )\r\n    const [pivotTableState, setPivotTableState] = useState<{ schema: { fields: [] }, data: tableDataEntry[] }>(\r\n        {\r\n            schema: { fields: [] },\r\n            data: [{\r\n                Amount: \"\",\r\n                Broad_category: \"\",\r\n                Narrow_category: \"\"\r\n            }]\r\n        }\r\n    )\r\n\r\n    // State for datalists\r\n\r\n    const [dataListsState, setDataListsState] = useState<allDataListsType>({\r\n        source: [],\r\n        person_earner: [],\r\n        narrow_category: [],\r\n        broad_category: [],\r\n        vendor: []\r\n    })\r\n\r\n    // Flag to set display of expense form\r\n    const [showAddExpensesForm, setShowAddExpensesForm] = useState<boolean>(false)\r\n    const [showAddIncomeForm, setShowAddIncomeForm] = useState<boolean>(false)\r\n    const [showReportsForm, setShowReportsForm] = useState<boolean>(false)\r\n\r\n    function hideForms(): void {\r\n        setShowAddExpensesForm(false)\r\n        setShowAddIncomeForm(false)\r\n        setShowReportsForm(false)\r\n    }\r\n\r\n    function formatDates(entry: tableDataEntry): tableDataEntry {\r\n        if (!entry.Date) {\r\n            return entry\r\n        } else {\r\n            let date = new Date(entry.Date);\r\n            let year = date.getUTCFullYear();\r\n            let month = (1 + date.getUTCMonth()).toString();\r\n            month = month.length > 1 ? month : '0' + month;\r\n            let day = date.getUTCDate().toString();\r\n            day = day.length > 1 ? day : '0' + day;\r\n            let dateString = month + '/' + day + '/' + year;\r\n            entry.Date = dateString\r\n            return entry\r\n        }\r\n    }\r\n\r\n    function handleFormChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }> | React.ChangeEvent<HTMLSelectElement>): void {\r\n        let name = event.target.name as keyof typeof formState\r\n        setFormState({ ...formState, [name]: event.target.value })\r\n    }\r\n\r\n    async function handleFormSubmit(event: React.SyntheticEvent): Promise<any> {\r\n        try {\r\n            event.preventDefault()\r\n            let route = formState.form\r\n            let response = await API[route](Auth.token, formState)\r\n            // Formatting the dates the hard way because javascript doesn't support strftime...\r\n            if (route !== 'pivot') {\r\n                response.data = response.data.map(formatDates)\r\n            }\r\n            switch (route) {\r\n                case \"expenses\":\r\n                    setExpensesTableState(response)\r\n                    break;\r\n                case \"income\":\r\n                    setIncomeTableState(response)\r\n                    break;\r\n                case \"pivot\":\r\n                    setPivotTableState(response)\r\n                    break;\r\n            }\r\n        } catch (err) {\r\n            if (err.message === \"Unauthorized\") {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n        }\r\n    }\r\n\r\n    function assignId(\r\n        name: InputName,\r\n        value: string) {\r\n\r\n        let state;\r\n        let id;\r\n\r\n        switch (name) {\r\n            case \"Person\":\r\n                state = dataListsState.person_earner;\r\n                id = 'person_id';\r\n                break;\r\n            case \"Source\":\r\n                state = dataListsState.source;\r\n                id = 'source_id';\r\n                break;\r\n            case \"Broad_category\":\r\n                state = dataListsState.broad_category;\r\n                id = 'broad_category_id';\r\n                break;\r\n            case \"Narrow_category\":\r\n                state = dataListsState.narrow_category;\r\n                id = 'narrow_category_id';\r\n                break;\r\n            case \"Vendor\":\r\n                state = dataListsState.vendor;\r\n                id = 'vendor_id';\r\n                break;\r\n        }\r\n        let dataListItem = state.filter((i: dataListStateType) => i.name === value)[0]\r\n        if (dataListItem) {\r\n            return { id: id, dataListItem: dataListItem }\r\n        } else {\r\n            return { id: null, dataListItem: null }\r\n        }\r\n    }\r\n\r\n    async function handleExpensesChange(event: React.ChangeEvent<HTMLInputElement>, index: number): Promise<void> {\r\n        try {\r\n            let { name, value } = event.target;\r\n            let newExpensesTableStateData: tableDataEntry[] = [...expensesTableState.data]\r\n            let updatedRow: tableDataEntry = { ...newExpensesTableStateData[index], [name]: value }\r\n            if (name === \"Person\" || name === \"Broad_category\" || name === \"Narrow_category\" || name === \"Vendor\") {\r\n                let { id, dataListItem } = assignId(name as InputName, value)\r\n                if (id && dataListItem) {\r\n                    updatedRow = { ...updatedRow, [id]: dataListItem.id }\r\n                }\r\n            }\r\n            newExpensesTableStateData[index] = updatedRow\r\n            setExpensesTableState({ ...expensesTableState, data: newExpensesTableStateData })\r\n\r\n        } catch (err) {\r\n            console.error(err)\r\n            if (err.message === \"Unauthorized\") {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n        }\r\n    }\r\n\r\n    async function updateExpensesRow(index: number): Promise<void> {\r\n        try {\r\n            let res = await API.updateExpenses(Auth.token, expensesTableState.data[index])\r\n            console.log(res)\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    async function updateIncomeRow(index: number): Promise<void> {\r\n        try {\r\n            let res = await API.updateIncome(Auth.token, incomeTableState.data[index])\r\n            console.log(res)\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    async function handleIncomeChange(event: React.ChangeEvent<HTMLInputElement>, index: number): Promise<void> {\r\n        try {\r\n            let { name, value } = event.target;\r\n            let newIncomeTableStateData: tableDataEntry[] = [...incomeTableState.data]\r\n            let updatedRow: tableDataEntry = { ...newIncomeTableStateData[index], [name]: value }\r\n            if (name === \"Person\" || name === \"Source\") {\r\n                let { id, dataListItem } = assignId(name as InputName, value)\r\n                if (id && dataListItem) {\r\n                    updatedRow = { ...updatedRow, [id]: dataListItem.id }\r\n                }\r\n            }\r\n            newIncomeTableStateData[index] = updatedRow\r\n            setIncomeTableState({ ...incomeTableState, data: newIncomeTableStateData })\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    async function deleteEntry(id: number | undefined) {\r\n        try {\r\n            if (formState.form === \"expenses\") {\r\n                await API.deleteExpenses(Auth.token, id);\r\n                let newExpensesTableStateData = expensesTableState.data.filter(entry => entry.entry_id !== id)\r\n                setExpensesTableState({ ...expensesTableState, data: newExpensesTableStateData })\r\n            } else if (formState.form === \"income\") {\r\n                await API.deleteIncome(Auth.token, id);\r\n                let newIncomeTableStateData = incomeTableState.data.filter(entry => entry.id !== id)\r\n                setIncomeTableState({ ...incomeTableState, data: newIncomeTableStateData })\r\n            }\r\n        } catch (err) {\r\n            console.error(err)\r\n            if (err === 'Unauthorized') {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // Create classes to use for styling\r\n    const useStyles = makeStyles((theme: Theme) =>\r\n        createStyles({\r\n            formControl: {\r\n                margin: theme.spacing(1),\r\n                minWidth: '7em'\r\n            },\r\n            selectEmpty: {\r\n                marginTop: theme.spacing(2),\r\n            },\r\n            root: {\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                flexWrap: 'wrap',\r\n                [theme.breakpoints.up('md')]: {\r\n                    flexWrap: 'noWrap',\r\n                },\r\n                '& > *': {\r\n                    margin: theme.spacing(1),\r\n                    [theme.breakpoints.down('xs')]: {\r\n                        width: '100%',\r\n                    },\r\n                },\r\n            },\r\n            wallchart: {\r\n                width: '100%'\r\n            },\r\n            logoutBtn: {\r\n                float: 'right',\r\n                margin: '1em',\r\n\r\n            },\r\n            offline: {\r\n                backgroundColor: 'red',\r\n                color: 'white',\r\n                textAlign: 'center',\r\n                position: 'sticky'\r\n            }\r\n        })\r\n    );\r\n    const classes = useStyles();\r\n\r\n    // Control display of Offline banner\r\n    const [offline, setOffline] = useState<boolean>(false)\r\n    window.addEventListener(\"offline\", () => setOffline(true))\r\n    window.addEventListener(\"online\", () => setOffline(false))\r\n\r\n    useEffect(() => {\r\n        async function getDataLists(): Promise<void> {\r\n            let datalists = await API.dataList(Auth.token)\r\n            setDataListsState(datalists)\r\n        }\r\n        getDataLists()\r\n        if (!navigator.onLine) {\r\n            setOffline(true)\r\n        }\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div className=\"Home\">\r\n            {offline ? (\r\n                <AppBar className={classes.offline} position='sticky'>\r\n                    Offline\r\n                </AppBar>\r\n            ) : null}\r\n            <header className=\"header\">\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={classes.logoutBtn}\r\n                    onClick={() => setAuth({ type: 'LOGOUT' })}\r\n                >Logout\r\n                </Button>\r\n                <Container className={classes.root}>\r\n                    <h1 style={{ textAlign: 'center' }}>Finances!</h1>\r\n                </Container>\r\n                {Auth.token ?\r\n                    <img src=\"/wallchart\" alt=\"Wall Chart\" className={classes.wallchart} />\r\n                    : null\r\n                }\r\n                <Container className={classes.root}>\r\n                    {!showAddExpensesForm ? (\r\n                        !showAddIncomeForm ? (\r\n                            !showReportsForm ? (\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    className={classes.root}\r\n                                    onClick={() => {\r\n                                        setShowAddExpensesForm(true)\r\n                                    }}>\r\n                                    Log Expense\r\n                                </Button>\r\n                            ) : null\r\n                        ) : null\r\n                    ) : (\r\n                            <AddExpensesForm classes={classes} hideForms={hideForms} />\r\n                        )}\r\n                    {!showAddIncomeForm ? (\r\n                        !showAddExpensesForm ? (\r\n                            !showReportsForm ? (\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    className={classes.root}\r\n                                    onClick={() => {\r\n                                        setShowAddIncomeForm(true)\r\n                                    }}>\r\n                                    Log Income\r\n                                </Button>\r\n                            ) : null\r\n                        ) : null\r\n                    ) : (\r\n                            <AddIncomeForm classes={classes} hideForms={hideForms} />\r\n                        )}\r\n                    {!showReportsForm ? (\r\n                        !showAddIncomeForm ? (\r\n                            !showAddExpensesForm ? (\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"secondary\"\r\n                                    className={classes.root}\r\n                                    onClick={() => {\r\n                                        setShowReportsForm(true)\r\n                                    }}>\r\n                                    View Reports\r\n                                </Button>\r\n                            ) : null\r\n                        ) : null\r\n                    ) : (\r\n                            <form onSubmit={handleFormSubmit} className={classes.root}>\r\n                                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                                    <InputLabel htmlFor=\"form\">Report</InputLabel>\r\n                                    <Select\r\n                                        name=\"form\"\r\n                                        label=\"Report\"\r\n                                        labelId=\"form\"\r\n                                        value={formState.form}\r\n                                        onChange={handleFormChange}>\r\n                                        <MenuItem value=\"income\">Income</MenuItem>\r\n                                        <MenuItem value=\"expenses\">Expenses</MenuItem>\r\n                                        <MenuItem value=\"pivot\">Pivot Table</MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                                <TextField\r\n                                    onChange={handleFormChange}\r\n                                    value={formState.year}\r\n                                    label=\"Year\"\r\n                                    name=\"year\"\r\n                                    type=\"number\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                                    <InputLabel htmlFor=\"month2\">Month</InputLabel>\r\n                                    <Select\r\n                                        onChange={handleFormChange}\r\n                                        value={formState.month}\r\n                                        name=\"month\"\r\n                                        labelId=\"month2\"\r\n                                        label=\"Month\"\r\n                                    >\r\n                                        <MenuItem value={1}>January</MenuItem>\r\n                                        <MenuItem value={2}>February</MenuItem>\r\n                                        <MenuItem value={3}>March</MenuItem>\r\n                                        <MenuItem value={4}>April</MenuItem>\r\n                                        <MenuItem value={5}>May</MenuItem>\r\n                                        <MenuItem value={6}>June</MenuItem>\r\n                                        <MenuItem value={7}>July</MenuItem>\r\n                                        <MenuItem value={8}>August</MenuItem>\r\n                                        <MenuItem value={9}>September</MenuItem>\r\n                                        <MenuItem value={10}>October</MenuItem>\r\n                                        <MenuItem value={11}>November</MenuItem>\r\n                                        <MenuItem value={12}>December</MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                >\r\n                                    View\r\n                        </Button>\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    variant=\"contained\"\r\n                                    color=\"secondary\"\r\n                                    onClick={() => {\r\n                                        hideForms()\r\n                                    }\r\n                                    }\r\n                                >Close</Button>\r\n                            </form>\r\n\r\n                        )}\r\n                </Container>\r\n            </header >\r\n            <div className=\"body\">\r\n                {formState.form === \"income\" && incomeTableState.data[0]?.id ? (\r\n                    <ReportTable\r\n                        state={incomeTableState}\r\n                        dataLists={dataListsState}\r\n                        handleChange={handleIncomeChange}\r\n                        handleUpdate={updateIncomeRow}\r\n                        deleteEntry={deleteEntry}\r\n                        form={formState.form}\r\n                    />\r\n                ) : null}\r\n                {formState.form === \"expenses\" && expensesTableState.data[0]?.entry_id ? (\r\n                    <ReportTable\r\n                        state={expensesTableState}\r\n                        dataLists={dataListsState}\r\n                        handleChange={handleExpensesChange}\r\n                        handleUpdate={updateExpensesRow}\r\n                        deleteEntry={deleteEntry}\r\n                        form={formState.form}\r\n                    />\r\n                ) : null}\r\n                {formState.form === \"pivot\" && pivotTableState ? (\r\n                    <ReportTable\r\n                        state={pivotTableState}\r\n                        deleteEntry={() => null}\r\n                        handleUpdate={() => null}\r\n                        handleChange={() => null}\r\n                        form={formState.form}\r\n                    />\r\n                ) : null}\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Home;","import React, { useState } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport API from '../utils/API'\r\nimport { AuthContext } from '../App'\r\nimport { Button, TextField } from '@material-ui/core';\r\nimport {makeStyles, createStyles, Theme} from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\ncreateStyles({\r\n    root: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexWrap: 'wrap',\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n            [theme.breakpoints.down('xs')]: {\r\n                width: '100%',\r\n            },\r\n        }\r\n    }\r\n})\r\n);\r\n\r\nexport default function Login() {\r\n    const { Auth, setAuth } = React.useContext(AuthContext)\r\n\r\n    const [loginFormState, setLoginFormState] = useState({\r\n        username: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    const [failure, setFailure] = useState(false)\r\n\r\n    const inputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.target;\r\n        setLoginFormState({\r\n            ...loginFormState,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const formSubmit = async (event: React.SyntheticEvent) => {\r\n        event.preventDefault();\r\n        try {\r\n            API.login(loginFormState).then(newToken => {\r\n                console.log(\"Login Token: \" + newToken.token)\r\n                setAuth({ type: 'LOGIN', payload: { user: loginFormState.username, token: newToken.token } })\r\n            })\r\n        } catch (err) {\r\n            console.log(err)\r\n            setFailure(true)\r\n        }\r\n\r\n\r\n    }\r\n\r\n    const classes = useStyles()\r\n\r\n\r\n    if (Auth.loggedIn) {\r\n        return <Redirect to='/' />\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <>\r\n            <div className=\"Login\" style={{textAlign: 'center'}}>\r\n                    <h4>Login</h4>\r\n                    <div className=\"Response\">\r\n                        {failure ? <p>Incorrect username or password</p> : null}\r\n                    </div>\r\n                <form className={classes.root} onSubmit={formSubmit}>\r\n                    <TextField\r\n                        onChange={inputChange}\r\n                        value={loginFormState.username}\r\n                        type=\"text\"\r\n                        name=\"username\"\r\n                        label=\"username\"\r\n                        variant=\"outlined\"\r\n                    />\r\n                    <TextField\r\n                        onChange={inputChange}\r\n                        value={loginFormState.password}\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        label=\"password\"\r\n                        variant=\"outlined\"\r\n                    />\r\n                    <Button variant=\"contained\" color=\"primary\" name=\"login\" type=\"submit\">Login</Button>\r\n                </form>\r\n            </div>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\r\n\r\nexport default function Alert(props: AlertProps) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}","import React from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Alert from './Alert'\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { alertStateType } from '../interfaces/Interfaces';\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    snackbar: {\r\n        width: '100%',\r\n        '& > * + *': {\r\n            marginTop: theme.spacing(2),\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function CustomizedSnackbar({ state, setState }: {\r\n    state: alertStateType,\r\n    setState: React.Dispatch<React.SetStateAction<alertStateType>>\r\n    }) {\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        setState({ ...state, open: false });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.snackbar}>\r\n            <Snackbar\r\n                open={state.open}\r\n                autoHideDuration={3000}\r\n                onClose={handleClose}\r\n\r\n            >\r\n                <Alert onClose={handleClose} severity={state.severity}>\r\n                    {state.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        </div>\r\n    );\r\n}","import React, { useEffect, useState, useReducer } from 'react'\nimport { BrowserRouter as Router, Route, Redirect, RouteComponentProps } from 'react-router-dom'\nimport Home from './pages/Home'\nimport Login from './pages/Login'\nimport API from './utils/API'\nimport { testDatabase } from './utils/db'\nimport './App.css';\nimport CustomizedSnackbar from './components/SnackBar'\nimport { alertStateType } from './interfaces/Interfaces'\n\n// import Auth from './utils/Auth'\n\ninterface Auth {\n  loggedIn: boolean,\n  user: string,\n  token: string\n}\n\ninterface ContextState {\n  Auth: Auth,\n  setAuth: React.Dispatch<{ type: string; payload?: { user: string; token: string; } | undefined; }>,\n  setAlertState: React.Dispatch<React.SetStateAction<alertStateType>>\n}\n\nconst ProtectedRoute = ({ component: Component, loggedIn, ...rest }: {\n  path: string,\n  loggedIn: boolean,\n  setLoggedIn: Function,\n  component: React.FunctionComponent<RouteComponentProps>,\n}): JSX.Element => (\n    <Route {...rest} render={props => (\n      loggedIn\n        ? <Component {...props} />\n        : <Redirect to='/login' />\n    )\n    } />\n\n  )\n\nexport const AuthContext = React.createContext<ContextState>({\n  Auth: {\n    loggedIn: false,\n    user: \"\",\n    token: \"\"\n  },\n  setAuth: (): void => { },\n  setAlertState: (): void => {}\n})\n\n\n\nexport default function App() {\n\n  const reducer = (state: Auth, action: { type: string, payload?: { user: string, token: string } }): Auth => {\n    if (action.type === 'LOGIN' && action.payload) {\n      localStorage.setItem(\"user\", action.payload.user);\n      localStorage.setItem(\"token\", action.payload.token);\n      return {\n        ...state,\n        loggedIn: true,\n        user: action.payload.user,\n        token: action.payload.token\n      };\n    } else if (action.type === 'LOGOUT') {\n      localStorage.clear();\n      return {\n        ...state,\n        loggedIn: false,\n        user: \"\",\n        token: \"\",\n      };\n    } else {\n      return state;\n    }\n  };\n\n  const [Auth, setAuth] = useReducer(reducer, {\n    loggedIn: false,\n    user: \"\",\n    token: \"\"\n  })\n\n  const [alertState, setAlertState] = useState<alertStateType>({\n    severity: undefined,\n    message: \"\",\n    open: false,\n  })\n\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\")\n    const user = localStorage.getItem(\"user\")\n    if (token) {\n      API.checkAuth(token)\n        .then(res => setAuth({ type: 'LOGIN', payload: { user: res.username, token: token } }))\n        .catch(err => {\n          if (err.message === \"Unauthorized\") {\n            setAuth({ type: 'LOGOUT' })\n          } else {\n            setAuth({ type: 'LOGIN', payload: { user: user || \"\", token: token || \"\" } })\n          }\n        })\n    }\n  }, [])\n\n\n  useEffect(() => {\n    testDatabase()\n  })\n\n  return (\n    <AuthContext.Provider\n      value={{ Auth, setAuth, setAlertState }}\n    >\n\n      <Router>\n        <ProtectedRoute path=\"/\"\n          loggedIn={Auth.loggedIn}\n          setLoggedIn={setAuth}\n          // offline={offline}\n          component={Home}\n        />\n        <Route exact path=\"/login\">\n          <Login />\n        </Route>\n      </Router>\n      <CustomizedSnackbar\n        state={alertState}\n        setState={setAlertState}\n      />\n    </AuthContext.Provider>\n  )\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}