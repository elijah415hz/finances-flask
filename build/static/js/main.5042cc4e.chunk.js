(this.webpackJsonpreact_client=this.webpackJsonpreact_client||[]).push([[0],{113:function(e,n,t){},121:function(e,n,t){},122:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t(0),o=t.n(r),c=t(12),i=t.n(c),s=(t(113),t(17)),l=t(7),d=t(88),u=t(16),m=t(70),j=t(73),h=t(14),b=t.n(h),p=t(23),f=t(18),O=t(87),g=t.n(O),v=t(86),x=t.n(v),y=t(157),w=t(158),C=t(159),k=t(5),N=t(174),_=Object(k.a)((function(e){return Object(N.a)({head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14,padding:0,maxWidth:"10ch"}})}))(y.a),S=Object(k.a)((function(e){return Object(N.a)({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"& input":{backgroundColor:"inherit",paddingLeft:0}}})}))(w.a);function L(e){var n=Object(r.useState)({Amount:""}),t=Object(s.a)(n,2),o=t[0],c=t[1];function i(e,n){return Object(a.jsx)("datalist",{id:n,children:e.map((function(e){return Object(a.jsx)("option",{value:e.name},e.id)}))})}function d(e){var n=e.target,t=n.name,a=n.value;c(Object(l.a)(Object(l.a)({},o),{},Object(f.a)({},t,a)))}return Object(r.useEffect)((function(){c(e.entry)}),[e.entry]),Object(a.jsxs)(S,{children:[e.fields.filter((function(e){return!e.name.includes("id")})).map((function(n){var t,r,c,s,l,u,m,j,h,b;return Object(a.jsxs)(_,{children:["Amount"===n.name?Object(a.jsx)("span",{children:"$"}):null,Object(a.jsx)("input",{name:n.name,onBlur:function(n){e.handleChange(n,e.i)},onChange:d,className:"tableInput",value:o[n.name]||"",list:n.name,style:{width:"80%"}}),"Source"===n.name&&(null===(t=e.dataLists)||void 0===t?void 0:t.source)?i(null===(r=e.dataLists)||void 0===r?void 0:r.source,n.name):null,"Person"===n.name&&(null===(c=e.dataLists)||void 0===c?void 0:c.person_earner)?i(null===(s=e.dataLists)||void 0===s?void 0:s.person_earner,n.name):null,"Narrow_category"===n.name&&(null===(l=e.dataLists)||void 0===l?void 0:l.narrow_category)?i(null===(u=e.dataLists)||void 0===u?void 0:u.narrow_category,n.name):null,"Broad_category"===n.name&&(null===(m=e.dataLists)||void 0===m?void 0:m.broad_category)?i(null===(j=e.dataLists)||void 0===j?void 0:j.broad_category,n.name):null,"Vendor"===n.name&&(null===(h=e.dataLists)||void 0===h?void 0:h.vendor)?i(null===(b=e.dataLists)||void 0===b?void 0:b.vendor,n.name):null]})})),Object(a.jsx)(_,{children:Object(a.jsx)(C.a,{color:"primary",onClick:function(){return e.handleUpdate(e.i)},children:Object(a.jsx)(x.a,{})})}),Object(a.jsx)(_,{children:Object(a.jsx)(C.a,{"aria-label":"delete",color:"secondary",onClick:function(){return e.deleteEntry(o.entry_id||o.id)},children:Object(a.jsx)(g.a,{})})})]})}function T(e){return Object(a.jsx)("tbody",{children:Object(a.jsx)("tr",{children:e.fields.filter((function(e){return!e.name.includes("id")})).map((function(n){return Object(a.jsxs)("td",{children:["Amount"===n.name?Object(a.jsx)("span",{children:"$"}):null,Object(a.jsx)("span",{className:"tableInput",children:e.entry[n.name]||""})]},e.i+n.name)}))})})}var D=t(163),I=t(165),A=t(161),E=t(164),B=t(162),U=t(160);function P(e){var n=Object(k.a)((function(e){return Object(N.a)({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white}})}))(y.a),t=Object(U.a)((function(e){return Object(N.a)({table:{minWidth:650}})}))();return Object(a.jsx)(A.a,{component:B.a,children:Object(a.jsxs)(D.a,{className:t.table,children:[Object(a.jsx)(E.a,{children:Object(a.jsxs)(w.a,{children:[e.state.schema.fields.filter((function(e){return!e.name.includes("id")})).map((function(e){return Object(a.jsx)(n,{children:e.name.replace("_"," ")},e.name)})),Object(a.jsx)(n,{children:Object(a.jsx)("span",{children:"Save"})}),Object(a.jsx)(n,{children:Object(a.jsx)("span",{children:"Delete"})})]})}),Object(a.jsx)(I.a,{className:"tableBody",children:e.state.data.map((function(n,t){return"pivot"===e.form?Object(a.jsx)(T,{entry:n,i:t,fields:e.state.schema.fields},n.entry_id||n.id):Object(a.jsx)(L,{entry:n,i:t,fields:e.state.schema.fields,handleChange:e.handleChange,handleUpdate:e.handleUpdate,dataLists:e.dataLists,deleteEntry:e.deleteEntry},t)}))})]})})}function F(e,n){if(401===e.status)throw new Error("Unauthorized");return"json"===n?e.json():e.text()}var z={expenses:function(e,n){return fetch("/api/expenses/".concat(n.year,"/").concat(n.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return F(e,"json")}))},postExpenses:function(e,n){return fetch("/api/expenses/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return F(e,"text")}))},postIncome:function(e,n){return fetch("/api/income/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return F(e,"text")}))},deleteExpenses:function(e,n){return fetch("/api/expenses/".concat(n),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return F(e,"text")}))},updateExpenses:function(e,n){return fetch("/api/expenses/".concat(n.entry_id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return F(e,"text")}))},income:function(e,n){return fetch("/api/income/".concat(n.year,"/").concat(n.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return F(e,"json")}))},updateIncome:function(e,n){return fetch("/api/income/".concat(n.id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return F(e,"text")}))},deleteIncome:function(e,n){return fetch("/api/income/".concat(n),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return F(e,"text")}))},pivot:function(e,n){return fetch("/api/expenses/pivot/".concat(n.year,"/").concat(n.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return F(e,"json")}))},dataList:function(e){return fetch("/api/datalists",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return F(e,"json")}))},login:function(e){return fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return F(e,"json")}))},checkAuth:function(e){return fetch("/auth/checkAuth",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return F(e,"json")}))}},M=t(176),G=t(169),W=t(178),R=t(172),J=t(179),H=t(166),V=t(66),Y=t(22),K=t(171);function $(e){var n,t=o.a.useContext(te),c=t.Auth,i=t.setAuth,d={Date:new Date(Date.now()),Amount:NaN,person_id:NaN,broad_category_id:NaN,narrow_category_id:NaN,vendor:"",notes:""},u=Object(r.useState)(d),m=Object(s.a)(u,2),j=m[0],h=m[1],O=Object(r.useState)({name:"",id:NaN}),g=Object(s.a)(O,2),v=g[0],x=g[1],y=[{name:"Groceries",id:6,narrowCategories:[{name:"Food",id:10},{name:"Alcohol",id:49},{name:"Entertaining",id:7}]},{name:"Health and Body",id:12,narrowCategories:[{name:"Toiletries",id:27},{name:"Make-up",id:51},{name:"Drugs/Supplements",id:273},{name:"Doctors Visits",id:24},{name:"Gym",id:34},{name:"Essential Oils",id:58},{name:"Massages/Body Care",id:41}],person:!0},{name:"Work",id:8,narrowCategories:[{name:"Road Food Out",id:20},{name:"Road Groceries",id:37},{name:"Road Coffee",id:21},{name:"Business Food",id:70},{name:"Scores",id:68},{name:"Office Supplies",id:11},{name:"Plane Tickets",id:18},{name:"Transportation",id:9},{name:"Union Dues",id:55},{name:"Dry Cleaning",id:14},{name:"Concert Tickets",id:655},{name:"Lessons/Coachings",id:69},{name:"Application fees",id:61},{name:"Pianist Fees",id:656}],person:!0},{name:"Eating Out",id:3,narrowCategories:[{name:"Date",id:28},{name:"Friends",id:3},{name:"Snacks",id:17},{name:"On the Run",id:8},{name:"Coffee",id:30},{name:"Ordering in",id:48}]},{name:"Home Goods",id:9,narrowCategories:[{name:"Kitchen",id:12},{name:"Decorating",id:29},{name:"Furniture",id:16},{name:"Paper Products/Cleaning",id:15},{name:"Office Supplies",id:11},{name:"Hobbies/Creative",id:23},{name:"Linens",id:201}]},{name:"New York Home",id:1,narrowCategories:[{name:"Rent",id:40},{name:"Internet",id:1},{name:"Electricity",id:26}]},{name:"Seattle Home",id:7,narrowCategories:[{name:"Mortgage",id:39},{name:"HOA",id:38},{name:"Taxes",id:657},{name:"Internet",id:1},{name:"Electricity",id:26},{name:"Manager/Maintanence",id:42},{name:"Insurance",id:134}]},{name:"Clothes",id:11,person:!0},{name:"Laundry",id:4,narrowCategories:[{name:"Laundry",id:4},{name:"Dry Cleaning",id:14}]},{name:"Entertainment",id:14,narrowCategories:[{name:"Live Shows",id:32},{name:"Movies",id:44},{name:"Museums",id:53},{name:"Books",id:36},{name:"Home (Netflix, Spotify, Amazon, Movie Rentals)",id:46},{name:"Newspaper/Magazine",id:47}]},{name:"Philanthropy",id:17},{name:"Electronics",id:5,narrowCategories:[{name:"Phone Bill",id:33},{name:"Computers",id:588},{name:"Accessories",id:31},{name:"Cloud Storage Fees",id:6}]},{name:"Gifts",id:13},{name:"Transportation",id:2,narrowCategories:[{name:"Gas",id:22},{name:"Repairs",id:577},{name:"Insurance",id:134},{name:"Bike",id:567},{name:"Subway",id:35},{name:"Taxi/Lyft",id:5},{name:"Car Rental",id:2},{name:"Seattle Airplanes",id:276},{name:"Parking",id:209}]},{name:"Maggie",id:10,narrowCategories:[{name:"Food",id:10},{name:"Litter",id:13},{name:"Vet Bills",id:275},{name:"Toys",id:60}]},{name:"Travel/Leisure",id:16,narrowCategories:[{name:"Planes",id:62},{name:"Ground Transportation",id:52},{name:"Food",id:10},{name:"Experiences",id:64},{name:"Lodging",id:43}]},{name:"Legal",id:19,narrowCategories:[{name:"Documents",id:202},{name:"Services",id:63}]},{name:"Student Loans",id:15},{name:"Education",id:18,person:!0},{name:"Theo",id:7,narrowCategories:[{name:"Baby sitting",id:274},{name:"Toys",id:60}]}];function w(e){var n=e.target.name;if(h(Object(l.a)(Object(l.a)({},j),{},Object(f.a)({},n,e.target.value))),"broad_category_id"===n){var t=y.filter((function(n){return n.id===e.target.value}))[0];x(t)}}function C(){return(C=Object(p.a)(b.a.mark((function e(n){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,(a=Object(l.a)({},j)).Date=null===(t=a.Date)||void 0===t?void 0:t.toLocaleDateString("en-US"),e.next=6,z.postExpenses(c.token,a);case 6:r=e.sent,h({Date:new Date(Date.now()),Amount:NaN,person_id:NaN,broad_category_id:NaN,narrow_category_id:NaN,vendor:"",notes:""}),x({name:"",id:NaN}),console.log(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),"Unauthorized"===e.t0.message&&i({type:"LOGOUT"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(a.jsx)("div",{className:e.classes.root,children:Object(a.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return C.apply(this,arguments)},children:[Object(a.jsx)(Y.a,{utils:V.a,children:Object(a.jsx)(K.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:j.Date,onChange:function(e){h(Object(l.a)(Object(l.a)({},j),{},{Date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(M.a,{onChange:w,value:j.vendor,label:"Vendor",name:"vendor",type:"string"}),Object(a.jsx)(M.a,{onChange:w,value:j.Amount,label:"Amount",name:"Amount",type:"number"}),Object(a.jsxs)(G.a,{className:e.classes.formControl,children:[Object(a.jsx)(W.a,{htmlFor:"broad_category",children:"Broad Category"}),Object(a.jsx)(R.a,{onChange:w,value:j.broad_category_id,name:"broad_category_id",labelId:"broad_category",label:"Broad Category",children:y.map((function(e){return Object(a.jsx)(J.a,{value:e.id,children:e.name})}))})]}),v.narrowCategories?Object(a.jsxs)(G.a,{className:e.classes.formControl,children:[Object(a.jsx)(W.a,{htmlFor:"narrow_category",children:"Narrow Category"}),Object(a.jsx)(R.a,{onChange:w,value:j.narrow_category_id,name:"narrow_category_id",labelId:"narrow_category",label:"Narrow Category",children:null===(n=v.narrowCategories)||void 0===n?void 0:n.map((function(e){return Object(a.jsx)(J.a,{value:e.id,children:e.name})}))})]}):null,v.person?Object(a.jsxs)(G.a,{className:e.classes.formControl,children:[Object(a.jsx)(W.a,{htmlFor:"person_id",children:"Person"}),Object(a.jsx)(R.a,{onChange:w,value:j.person_id,name:"person_id",labelId:"person_id",label:"Person",children:[{name:"Alexa",id:3},{name:"Eli",id:1},{name:"Theo",id:2}].map((function(e){return Object(a.jsx)(J.a,{value:e.id,children:e.name})}))})]}):null,Object(a.jsx)(M.a,{onChange:w,value:j.notes,label:"Notes",name:"notes",type:"string"}),Object(a.jsx)(H.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"}),Object(a.jsx)(H.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){h(d),e.hideForms()},children:"Cancel"})]})})}function q(e){var n=o.a.useContext(te),t=n.Auth,c=n.setAuth,i={date:new Date(Date.now()),amount:NaN,earner_id:NaN,source:""},d=Object(r.useState)(i),u=Object(s.a)(d,2),m=u[0],j=u[1];function h(e){var n=e.target.name;j(Object(l.a)(Object(l.a)({},m),{},Object(f.a)({},n,e.target.value)))}function O(){return(O=Object(p.a)(b.a.mark((function e(n){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,(r=Object(l.a)({},m)).date=null===(a=r.date)||void 0===a?void 0:a.toLocaleDateString("en-US"),e.next=6,z.postIncome(t.token,r);case 6:o=e.sent,j(i),console.log(o),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),"Unauthorized"===e.t0.message&&c({type:"LOGOUT"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(a.jsx)("div",{className:e.classes.root,children:Object(a.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return O.apply(this,arguments)},children:[Object(a.jsx)(Y.a,{utils:V.a,children:Object(a.jsx)(K.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:m.date,onChange:function(e){j(Object(l.a)(Object(l.a)({},m),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(M.a,{onChange:h,value:m.source,label:"Source",name:"source",type:"string"}),Object(a.jsx)(M.a,{onChange:h,value:m.amount,label:"Amount",name:"amount",type:"number"}),Object(a.jsxs)(G.a,{className:e.classes.formControl,children:[Object(a.jsx)(W.a,{htmlFor:"earner_id",children:"Person"}),Object(a.jsx)(R.a,{onChange:h,value:m.earner_id,name:"earner_id",labelId:"earner_id",label:"Person",children:[{name:"Alexa",id:3},{name:"Eli",id:1},{name:"Rent",id:8},{name:"Sales",id:10},{name:"Gift",id:11}].map((function(e){return Object(a.jsx)(J.a,{value:e.id,children:e.name})}))})]}),Object(a.jsx)(H.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"}),Object(a.jsx)(H.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){j(i),e.hideForms()},children:"Cancel"})]})})}var Q=t(170);var X=function(){var e,n,t=o.a.useContext(te),c=t.Auth,i=t.setAuth,d=Object(r.useState)({form:"expenses",year:new Date(Date.now()).getUTCFullYear(),month:new Date(Date.now()).getUTCMonth()}),u=Object(s.a)(d,2),m=u[0],h=u[1],O=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Date:"",Source:"",Person:"",id:NaN,source_id:NaN,earner_id:NaN}]}),g=Object(s.a)(O,2),v=g[0],x=g[1],y=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Date:"",Source:"",Vendor:"",Broad_category:"",Narrow_category:"",Person:"",Notes:"",entry_id:NaN}]}),w=Object(s.a)(y,2),C=w[0],k=w[1],_=Object(r.useState)({schema:{fields:[]},data:[{Amount:"",Broad_category:"",Narrow_category:""}]}),S=Object(s.a)(_,2),L=S[0],T=S[1],D=Object(r.useState)({source:[],person_earner:[],narrow_category:[],broad_category:[],vendor:[]}),I=Object(s.a)(D,2),A=I[0],E=I[1],B=Object(r.useState)(!1),F=Object(s.a)(B,2),V=F[0],Y=F[1],K=Object(r.useState)(!1),X=Object(s.a)(K,2),Z=X[0],ee=X[1],ne=Object(r.useState)(!0),ae=Object(s.a)(ne,2),re=(ae[0],ae[1]);function oe(){Y(!1),ee(!1)}function ce(e){if(e.Date){var n=new Date(e.Date),t=n.getUTCFullYear(),a=(1+n.getUTCMonth()).toString();a=a.length>1?a:"0"+a;var r=n.getUTCDate().toString(),o=a+"/"+(r=r.length>1?r:"0"+r)+"/"+t;return e.Date=o,e}return e}function ie(e){var n=e.target.name;h(Object(l.a)(Object(l.a)({},m),{},Object(f.a)({},n,e.target.value)))}function se(){return(se=Object(p.a)(b.a.mark((function e(n){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),t=m.form,e.next=5,z[t](c.token,m);case 5:a=e.sent,"pivot"!==t&&(a.data=a.data.map(ce)),e.t0=t,e.next="expenses"===e.t0?10:"income"===e.t0?12:"pivot"===e.t0?14:16;break;case 10:return k(a),e.abrupt("break",16);case 12:return x(a),e.abrupt("break",16);case 14:return T(a),e.abrupt("break",16);case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(0),"Unauthorized"===e.t1.message&&i({type:"LOGOUT"});case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function le(e,n){var t,a;switch(e){case"Person":t=A.person_earner,a="person_id";break;case"Source":t=A.source,a="source_id";break;case"Broad_category":t=A.broad_category,a="broad_category_id";break;case"Narrow_category":t=A.narrow_category,a="narrow_category_id";break;case"Vendor":t=A.vendor,a="vendor_id"}var r=t.filter((function(e){return e.name===n}))[0];return r?{id:a,dataListItem:r}:{id:null,dataListItem:null}}function de(){return(de=Object(p.a)(b.a.mark((function e(n,t){var a,r,o,c,s,d,u,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=n.target,r=a.name,o=a.value,c=Object(j.a)(C.data),s=Object(l.a)(Object(l.a)({},c[t]),{},Object(f.a)({},r,o)),"Person"!==r&&"Broad_category"!==r&&"Narrow_category"!==r&&"Vendor"!==r||(d=le(r,o),u=d.id,m=d.dataListItem,u&&m&&(s=Object(l.a)(Object(l.a)({},s),{},Object(f.a)({},u,m.id)))),c[t]=s,k(Object(l.a)(Object(l.a)({},C),{},{data:c}))}catch(h){console.error(h),"Unauthorized"===h.message&&i({type:"LOGOUT"})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(p.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.updateExpenses(c.token,C.data[n]);case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function me(){return(me=Object(p.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.updateIncome(c.token,v.data[n]);case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function je(){return(je=Object(p.a)(b.a.mark((function e(n,t){var a,r,o,c,s,d,u,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=n.target,r=a.name,o=a.value,c=Object(j.a)(v.data),s=Object(l.a)(Object(l.a)({},c[t]),{},Object(f.a)({},r,o)),"Person"!==r&&"Source"!==r||(d=le(r,o),u=d.id,m=d.dataListItem,u&&m&&(s=Object(l.a)(Object(l.a)({},s),{},Object(f.a)({},u,m.id)))),c[t]=s,x(Object(l.a)(Object(l.a)({},v),{},{data:c}))}catch(h){console.error(h),"Unauthorized"===h.message&&i({type:"LOGOUT"})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return be.apply(this,arguments)}function be(){return(be=Object(p.a)(b.a.mark((function e(n){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"expenses"!==m.form){e.next=8;break}return e.next=4,z.deleteExpenses(c.token,n);case 4:t=C.data.filter((function(e){return e.entry_id!==n})),k(Object(l.a)(Object(l.a)({},C),{},{data:t})),e.next=13;break;case 8:if("income"!==m.form){e.next=13;break}return e.next=11,z.deleteIncome(c.token,n);case 11:a=v.data.filter((function(e){return e.id!==n})),x(Object(l.a)(Object(l.a)({},v),{},{data:a}));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),"Unauthorized"===e.t0&&i({type:"LOGOUT"});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var pe=Object(U.a)((function(e){var n;return Object(N.a)({formControl:{margin:e.spacing(1),minWidth:"7em"},selectEmpty:{marginTop:e.spacing(2)},root:(n={display:"flex",justifyContent:"center",flexWrap:"wrap"},Object(f.a)(n,e.breakpoints.up("md"),{flexWrap:"noWrap"}),Object(f.a)(n,"& > *",Object(f.a)({margin:e.spacing(1)},e.breakpoints.down("xs"),{width:"100%"})),n),wallchart:{width:"100%"},logoutBtn:{float:"right",marginRight:"1em"}})}))();return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.dataList(c.token);case 2:n=e.sent,E(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsxs)("div",{className:"Home",children:[Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)(H.a,{variant:"contained",color:"primary",className:pe.logoutBtn,onClick:function(){return i({type:"LOGOUT"})},children:"Logout"}),Object(a.jsx)("h1",{style:{textAlign:"center"},children:"Finances!"}),c.token?Object(a.jsx)("img",{src:"/wallchart",alt:"Wall Chart",className:pe.wallchart}):null,Object(a.jsxs)(Q.a,{className:pe.root,children:[V?Object(a.jsx)($,{classes:pe,hideForms:oe}):Z?null:Object(a.jsx)(H.a,{type:"submit",variant:"contained",color:"primary",className:pe.root,onClick:function(){Y(!0),re(!1)},children:"Log Expense"}),Z?Object(a.jsx)(q,{classes:pe,hideForms:oe}):V?null:Object(a.jsx)(H.a,{variant:"contained",color:"primary",className:pe.root,onClick:function(){ee(!0),re(!1)},children:"Log Income"})]}),Object(a.jsxs)("form",{onSubmit:function(e){return se.apply(this,arguments)},className:pe.root,children:[Object(a.jsxs)(G.a,{variant:"outlined",className:pe.formControl,children:[Object(a.jsx)(W.a,{htmlFor:"form",children:"Report"}),Object(a.jsxs)(R.a,{name:"form",label:"Report",labelId:"form",value:m.form,onChange:ie,children:[Object(a.jsx)(J.a,{value:"income",children:"Income"}),Object(a.jsx)(J.a,{value:"expenses",children:"Expenses"}),Object(a.jsx)(J.a,{value:"pivot",children:"Pivot Table"})]})]}),Object(a.jsx)(M.a,{onChange:ie,value:m.year,label:"Year",name:"year",type:"number",variant:"outlined"}),Object(a.jsxs)(G.a,{variant:"outlined",className:pe.formControl,children:[Object(a.jsx)(W.a,{htmlFor:"month2",children:"Month"}),Object(a.jsxs)(R.a,{onChange:ie,value:m.month,name:"month",labelId:"month2",label:"Month",children:[Object(a.jsx)(J.a,{value:1,children:"January"}),Object(a.jsx)(J.a,{value:2,children:"February"}),Object(a.jsx)(J.a,{value:3,children:"March"}),Object(a.jsx)(J.a,{value:4,children:"April"}),Object(a.jsx)(J.a,{value:5,children:"May"}),Object(a.jsx)(J.a,{value:6,children:"June"}),Object(a.jsx)(J.a,{value:7,children:"July"}),Object(a.jsx)(J.a,{value:8,children:"August"}),Object(a.jsx)(J.a,{value:9,children:"September"}),Object(a.jsx)(J.a,{value:10,children:"October"}),Object(a.jsx)(J.a,{value:11,children:"November"}),Object(a.jsx)(J.a,{value:12,children:"December"})]})]}),Object(a.jsx)(H.a,{type:"submit",variant:"contained",color:"primary",children:"View"})]})]}),Object(a.jsxs)("div",{className:"body",children:["income"===m.form&&(null===(e=v.data[0])||void 0===e?void 0:e.id)?Object(a.jsx)(P,{state:v,dataLists:A,handleChange:function(e,n){return je.apply(this,arguments)},handleUpdate:function(e){return me.apply(this,arguments)},deleteEntry:he,form:m.form}):null,"expenses"===m.form&&(null===(n=C.data[0])||void 0===n?void 0:n.entry_id)?Object(a.jsx)(P,{state:C,dataLists:A,handleChange:function(e,n){return de.apply(this,arguments)},handleUpdate:function(e){return ue.apply(this,arguments)},deleteEntry:he,form:m.form}):null,"pivot"===m.form&&L?Object(a.jsx)(P,{state:L,deleteEntry:function(){return null},handleUpdate:function(){return null},handleChange:function(){return null},form:m.form}):null]})]})},Z=Object(U.a)((function(e){return Object(N.a)({formControl:{margin:e.spacing(1),minWidth:120},root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(1)}}})}));function ee(){var e=o.a.useContext(te),n=e.Auth,t=e.setAuth,c=Object(r.useState)({username:"",password:""}),i=Object(s.a)(c,2),d=i[0],m=i[1],j=Object(r.useState)(!1),h=Object(s.a)(j,2),O=h[0],g=h[1],v=function(e){var n=e.target,t=n.name,a=n.value;m(Object(l.a)(Object(l.a)({},d),{},Object(f.a)({},t,a)))},x=function(){var e=Object(p.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{z.login(d).then((function(e){console.log("Login Token: "+e.token),t({type:"LOGIN",payload:{user:d.username,token:e.token}})}))}catch(a){console.log(a),g(!0)}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=Z();return n.loggedIn?Object(a.jsx)(u.a,{to:"/"}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"Login",style:{textAlign:"center"},children:[Object(a.jsx)("h4",{children:"Login"}),Object(a.jsx)("div",{className:"Response",children:O?Object(a.jsx)("p",{children:"Incorrect username or password"}):null}),Object(a.jsxs)("form",{className:y.root,onSubmit:x,children:[Object(a.jsx)(M.a,{onChange:v,value:d.username,type:"text",name:"username",label:"username",variant:"outlined"}),Object(a.jsx)(M.a,{onChange:v,value:d.password,type:"password",name:"password",label:"password",variant:"outlined"}),Object(a.jsx)(H.a,{variant:"contained",color:"primary",name:"login",type:"submit",children:"Login"})]})]})})}t(121);var ne=function(e){var n=e.component,t=e.loggedIn,r=Object(d.a)(e,["component","loggedIn"]);return Object(a.jsx)(u.b,Object(l.a)(Object(l.a)({},r),{},{render:function(e){return t?Object(a.jsx)(n,Object(l.a)({},e)):Object(a.jsx)(u.a,{to:"/login"})}}))},te=o.a.createContext({Auth:{loggedIn:!1,user:"",token:""},setAuth:function(){}}),ae=function(e,n){return"LOGIN"===n.type&&n.payload?(localStorage.setItem("user",n.payload.user),localStorage.setItem("token",n.payload.token),Object(l.a)(Object(l.a)({},e),{},{loggedIn:!0,user:n.payload.user,token:n.payload.token})):"LOGOUT"===n.type?(localStorage.clear(),Object(l.a)(Object(l.a)({},e),{},{loggedIn:!1,user:"",token:""})):e};function re(){var e=o.a.useReducer(ae,{loggedIn:!1,user:"",token:""}),n=Object(s.a)(e,2),t=n[0],c=n[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("token");e&&z.checkAuth(e).then((function(n){return c({type:"LOGIN",payload:{user:n.username,token:e}})})).catch((function(e){}))}),[]),Object(a.jsx)(te.Provider,{value:{Auth:t,setAuth:c},children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(ne,{path:"/",loggedIn:t.loggedIn,setLoggedIn:c,component:X}),Object(a.jsx)(u.b,{exact:!0,path:"/login",children:Object(a.jsx)(ee,{})})]})})}var oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ie=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,181)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),o(e),c(e)}))};i.a.render(Object(a.jsx)(re,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");oe?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ce(n,e)}))}}(),ie()}},[[122,1,2]]]);
//# sourceMappingURL=main.5042cc4e.chunk.js.map